(()=>{var gr=Object.create,Oe=Object.defineProperty;var Mr=Object.getOwnPropertyDescriptor;var xr=Object.getOwnPropertyNames;var br=Object.getPrototypeOf,Ar=Object.prototype.hasOwnProperty;var wr=e=>Oe(e,"__esModule",{value:!0});var J=(e,t)=>()=>(e&&(t=e(e=0)),t),H=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Tr=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of xr(t))!Ar.call(e,n)&&n!=="default"&&Oe(e,n,{get:()=>t[n],enumerable:!(r=Mr(t,n))||r.enumerable});return e},K=e=>Tr(wr(Oe(e!=null?gr(br(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Z=H(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.setMatrixArrayType=Sr;B.toRadian=Or;B.equals=Rr;B.RANDOM=B.ARRAY_TYPE=B.EPSILON=void 0;var Fe=1e-6;B.EPSILON=Fe;var Ye=typeof Float32Array!="undefined"?Float32Array:Array;B.ARRAY_TYPE=Ye;var Pr=Math.random;B.RANDOM=Pr;function Sr(e){B.ARRAY_TYPE=Ye=e}var Lr=Math.PI/180;function Or(e){return e*Lr}function Rr(e,t){return Math.abs(e-t)<=Fe*Math.max(1,Math.abs(e),Math.abs(t))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})});var Xe=H(W=>{"use strict";function de(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?de=function(r){return typeof r}:de=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},de(e)}Object.defineProperty(W,"__esModule",{value:!0});W.create=Ir;W.clone=Er;W.copy=qr;W.identity=Wr;W.fromValues=Cr;W.set=Dr;W.transpose=kr;W.invert=jr;W.adjoint=zr;W.determinant=Fr;W.multiply=He;W.rotate=Yr;W.scale=Hr;W.fromRotation=Vr;W.fromScaling=Nr;W.str=Xr;W.frob=Br;W.LDU=Gr;W.add=Qr;W.subtract=Ve;W.exactEquals=Zr;W.equals=Ur;W.multiplyScalar=$r;W.multiplyScalarAndAdd=Jr;W.sub=W.mul=void 0;var ae=Kr(Z());function Ne(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return Ne=function(){return e},e}function Kr(e){if(e&&e.__esModule)return e;if(e===null||de(e)!=="object"&&typeof e!="function")return{default:e};var t=Ne();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function Ir(){var e=new ae.ARRAY_TYPE(4);return ae.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function Er(e){var t=new ae.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function qr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Wr(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function Cr(e,t,r,n){var a=new ae.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a}function Dr(e,t,r,n,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e}function kr(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function jr(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=r*s-a*n;return c?(c=1/c,e[0]=s*c,e[1]=-n*c,e[2]=-a*c,e[3]=r*c,e):null}function zr(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e}function Fr(e){return e[0]*e[3]-e[2]*e[1]}function He(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=r[0],f=r[1],u=r[2],i=r[3];return e[0]=n*l+s*f,e[1]=a*l+c*f,e[2]=n*u+s*i,e[3]=a*u+c*i,e}function Yr(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=Math.sin(r),f=Math.cos(r);return e[0]=n*f+s*l,e[1]=a*f+c*l,e[2]=n*-l+s*f,e[3]=a*-l+c*f,e}function Hr(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=r[0],f=r[1];return e[0]=n*l,e[1]=a*l,e[2]=s*f,e[3]=c*f,e}function Vr(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e}function Nr(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function Xr(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Br(e){return Math.hypot(e[0],e[1],e[2],e[3])}function Gr(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]}function Qr(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function Ve(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function Zr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Ur(e,t){var r=e[0],n=e[1],a=e[2],s=e[3],c=t[0],l=t[1],f=t[2],u=t[3];return Math.abs(r-c)<=ae.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-l)<=ae.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-f)<=ae.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-u)<=ae.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))}function $r(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Jr(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}var en=He;W.mul=en;var tn=Ve;W.sub=tn});var Ze=H(C=>{"use strict";function ue(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ue=function(r){return typeof r}:ue=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ue(e)}Object.defineProperty(C,"__esModule",{value:!0});C.create=rn;C.clone=nn;C.copy=an;C.identity=sn;C.fromValues=on;C.set=cn;C.invert=ln;C.determinant=fn;C.multiply=Be;C.rotate=hn;C.scale=dn;C.translate=un;C.fromRotation=pn;C.fromScaling=vn;C.fromTranslation=_n;C.str=mn;C.frob=yn;C.add=gn;C.subtract=Ge;C.multiplyScalar=Mn;C.multiplyScalarAndAdd=xn;C.exactEquals=bn;C.equals=An;C.sub=C.mul=void 0;var U=wn(Z());function Qe(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return Qe=function(){return e},e}function wn(e){if(e&&e.__esModule)return e;if(e===null||ue(e)!=="object"&&typeof e!="function")return{default:e};var t=Qe();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function rn(){var e=new U.ARRAY_TYPE(6);return U.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function nn(e){var t=new U.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function an(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function sn(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function on(e,t,r,n,a,s){var c=new U.ARRAY_TYPE(6);return c[0]=e,c[1]=t,c[2]=r,c[3]=n,c[4]=a,c[5]=s,c}function cn(e,t,r,n,a,s,c){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=s,e[5]=c,e}function ln(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=t[4],l=t[5],f=r*s-n*a;return f?(f=1/f,e[0]=s*f,e[1]=-n*f,e[2]=-a*f,e[3]=r*f,e[4]=(a*l-s*c)*f,e[5]=(n*c-r*l)*f,e):null}function fn(e){return e[0]*e[3]-e[1]*e[2]}function Be(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=r[0],i=r[1],o=r[2],h=r[3],d=r[4],v=r[5];return e[0]=n*u+s*i,e[1]=a*u+c*i,e[2]=n*o+s*h,e[3]=a*o+c*h,e[4]=n*d+s*v+l,e[5]=a*d+c*v+f,e}function hn(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=Math.sin(r),i=Math.cos(r);return e[0]=n*i+s*u,e[1]=a*i+c*u,e[2]=n*-u+s*i,e[3]=a*-u+c*i,e[4]=l,e[5]=f,e}function dn(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=r[0],i=r[1];return e[0]=n*u,e[1]=a*u,e[2]=s*i,e[3]=c*i,e[4]=l,e[5]=f,e}function un(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=r[0],i=r[1];return e[0]=n,e[1]=a,e[2]=s,e[3]=c,e[4]=n*u+s*i+l,e[5]=a*u+c*i+f,e}function pn(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function vn(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function _n(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function mn(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function yn(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)}function gn(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function Ge(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function Mn(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function xn(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e}function bn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function An(e,t){var r=e[0],n=e[1],a=e[2],s=e[3],c=e[4],l=e[5],f=t[0],u=t[1],i=t[2],o=t[3],h=t[4],d=t[5];return Math.abs(r-f)<=U.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-u)<=U.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-i)<=U.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(s-o)<=U.EPSILON*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(c-h)<=U.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(l-d)<=U.EPSILON*Math.max(1,Math.abs(l),Math.abs(d))}var Tn=Be;C.mul=Tn;var Sn=Ge;C.sub=Sn});var Re=H(I=>{"use strict";function pe(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pe=function(r){return typeof r}:pe=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pe(e)}Object.defineProperty(I,"__esModule",{value:!0});I.create=On;I.fromMat4=Rn;I.clone=Pn;I.copy=Ln;I.fromValues=In;I.set=En;I.identity=qn;I.transpose=Wn;I.invert=Cn;I.adjoint=Dn;I.determinant=kn;I.multiply=Ue;I.translate=jn;I.rotate=zn;I.scale=Fn;I.fromTranslation=Yn;I.fromRotation=Hn;I.fromScaling=Vn;I.fromMat2d=Nn;I.fromQuat=Xn;I.normalFromMat4=Bn;I.projection=Gn;I.str=Qn;I.frob=Zn;I.add=Un;I.subtract=$e;I.multiplyScalar=$n;I.multiplyScalarAndAdd=Jn;I.exactEquals=Kn;I.equals=ei;I.sub=I.mul=void 0;var N=ti(Z());function Je(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return Je=function(){return e},e}function ti(e){if(e&&e.__esModule)return e;if(e===null||pe(e)!=="object"&&typeof e!="function")return{default:e};var t=Je();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function On(){var e=new N.ARRAY_TYPE(9);return N.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Rn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Pn(e){var t=new N.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ln(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function In(e,t,r,n,a,s,c,l,f){var u=new N.ARRAY_TYPE(9);return u[0]=e,u[1]=t,u[2]=r,u[3]=n,u[4]=a,u[5]=s,u[6]=c,u[7]=l,u[8]=f,u}function En(e,t,r,n,a,s,c,l,f,u){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=s,e[5]=c,e[6]=l,e[7]=f,e[8]=u,e}function qn(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Wn(e,t){if(e===t){var r=t[1],n=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Cn(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=t[4],l=t[5],f=t[6],u=t[7],i=t[8],o=i*c-l*u,h=-i*s+l*f,d=u*s-c*f,v=r*o+n*h+a*d;return v?(v=1/v,e[0]=o*v,e[1]=(-i*n+a*u)*v,e[2]=(l*n-a*c)*v,e[3]=h*v,e[4]=(i*r-a*f)*v,e[5]=(-l*r+a*s)*v,e[6]=d*v,e[7]=(-u*r+n*f)*v,e[8]=(c*r-n*s)*v,e):null}function Dn(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=t[4],l=t[5],f=t[6],u=t[7],i=t[8];return e[0]=c*i-l*u,e[1]=a*u-n*i,e[2]=n*l-a*c,e[3]=l*f-s*i,e[4]=r*i-a*f,e[5]=a*s-r*l,e[6]=s*u-c*f,e[7]=n*f-r*u,e[8]=r*c-n*s,e}function kn(e){var t=e[0],r=e[1],n=e[2],a=e[3],s=e[4],c=e[5],l=e[6],f=e[7],u=e[8];return t*(u*s-c*f)+r*(-u*a+c*l)+n*(f*a-s*l)}function Ue(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=t[8],h=r[0],d=r[1],v=r[2],_=r[3],p=r[4],m=r[5],y=r[6],g=r[7],M=r[8];return e[0]=h*n+d*c+v*u,e[1]=h*a+d*l+v*i,e[2]=h*s+d*f+v*o,e[3]=_*n+p*c+m*u,e[4]=_*a+p*l+m*i,e[5]=_*s+p*f+m*o,e[6]=y*n+g*c+M*u,e[7]=y*a+g*l+M*i,e[8]=y*s+g*f+M*o,e}function jn(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=a,e[2]=s,e[3]=c,e[4]=l,e[5]=f,e[6]=h*n+d*c+u,e[7]=h*a+d*l+i,e[8]=h*s+d*f+o,e}function zn(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*c,e[1]=d*a+h*l,e[2]=d*s+h*f,e[3]=d*c-h*n,e[4]=d*l-h*a,e[5]=d*f-h*s,e[6]=u,e[7]=i,e[8]=o,e}function Fn(e,t,r){var n=r[0],a=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Yn(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Hn(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Vn(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Nn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Xn(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=r+r,l=n+n,f=a+a,u=r*c,i=n*c,o=n*l,h=a*c,d=a*l,v=a*f,_=s*c,p=s*l,m=s*f;return e[0]=1-o-v,e[3]=i-m,e[6]=h+p,e[1]=i+m,e[4]=1-u-v,e[7]=d-_,e[2]=h-p,e[5]=d+_,e[8]=1-u-o,e}function Bn(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=t[4],l=t[5],f=t[6],u=t[7],i=t[8],o=t[9],h=t[10],d=t[11],v=t[12],_=t[13],p=t[14],m=t[15],y=r*l-n*c,g=r*f-a*c,M=r*u-s*c,A=n*f-a*l,w=n*u-s*l,D=a*u-s*f,R=i*_-o*v,k=i*p-h*v,E=i*m-d*v,F=o*p-h*_,j=o*m-d*_,q=h*m-d*p,L=y*q-g*j+M*F+A*E-w*k+D*R;return L?(L=1/L,e[0]=(l*q-f*j+u*F)*L,e[1]=(f*E-c*q-u*k)*L,e[2]=(c*j-l*E+u*R)*L,e[3]=(a*j-n*q-s*F)*L,e[4]=(r*q-a*E+s*k)*L,e[5]=(n*E-r*j-s*R)*L,e[6]=(_*D-p*w+m*A)*L,e[7]=(p*M-v*D-m*g)*L,e[8]=(v*w-_*M+m*y)*L,e):null}function Gn(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Qn(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Zn(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function Un(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function $e(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function $n(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function Jn(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e}function Kn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function ei(e,t){var r=e[0],n=e[1],a=e[2],s=e[3],c=e[4],l=e[5],f=e[6],u=e[7],i=e[8],o=t[0],h=t[1],d=t[2],v=t[3],_=t[4],p=t[5],m=t[6],y=t[7],g=t[8];return Math.abs(r-o)<=N.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-h)<=N.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-d)<=N.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-v)<=N.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(c-_)<=N.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-p)<=N.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(f-m)<=N.EPSILON*Math.max(1,Math.abs(f),Math.abs(m))&&Math.abs(u-y)<=N.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(i-g)<=N.EPSILON*Math.max(1,Math.abs(i),Math.abs(g))}var ri=Ue;I.mul=ri;var ni=$e;I.sub=ni});var Pe=H(S=>{"use strict";function ve(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ve=function(r){return typeof r}:ve=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ve(e)}Object.defineProperty(S,"__esModule",{value:!0});S.create=ii;S.clone=ai;S.copy=si;S.fromValues=oi;S.set=ci;S.identity=Ke;S.transpose=li;S.invert=fi;S.adjoint=hi;S.determinant=di;S.multiply=et;S.translate=ui;S.scale=pi;S.rotate=vi;S.rotateX=_i;S.rotateY=mi;S.rotateZ=yi;S.fromTranslation=gi;S.fromScaling=Mi;S.fromRotation=xi;S.fromXRotation=bi;S.fromYRotation=Ai;S.fromZRotation=wi;S.fromRotationTranslation=tt;S.fromQuat2=Ti;S.getTranslation=Si;S.getScaling=rt;S.getRotation=Oi;S.fromRotationTranslationScale=Ri;S.fromRotationTranslationScaleOrigin=Pi;S.fromQuat=Li;S.frustum=Ii;S.perspective=Ei;S.perspectiveFromFieldOfView=qi;S.ortho=Wi;S.lookAt=Ci;S.targetTo=Di;S.str=ki;S.frob=ji;S.add=zi;S.subtract=nt;S.multiplyScalar=Fi;S.multiplyScalarAndAdd=Yi;S.exactEquals=Hi;S.equals=Vi;S.sub=S.mul=void 0;var z=Ni(Z());function it(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return it=function(){return e},e}function Ni(e){if(e&&e.__esModule)return e;if(e===null||ve(e)!=="object"&&typeof e!="function")return{default:e};var t=it();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function ii(){var e=new z.ARRAY_TYPE(16);return z.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ai(e){var t=new z.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function si(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function oi(e,t,r,n,a,s,c,l,f,u,i,o,h,d,v,_){var p=new z.ARRAY_TYPE(16);return p[0]=e,p[1]=t,p[2]=r,p[3]=n,p[4]=a,p[5]=s,p[6]=c,p[7]=l,p[8]=f,p[9]=u,p[10]=i,p[11]=o,p[12]=h,p[13]=d,p[14]=v,p[15]=_,p}function ci(e,t,r,n,a,s,c,l,f,u,i,o,h,d,v,_,p){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=s,e[5]=c,e[6]=l,e[7]=f,e[8]=u,e[9]=i,e[10]=o,e[11]=h,e[12]=d,e[13]=v,e[14]=_,e[15]=p,e}function Ke(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function li(e,t){if(e===t){var r=t[1],n=t[2],a=t[3],s=t[6],c=t[7],l=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=s,e[11]=t[14],e[12]=a,e[13]=c,e[14]=l}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function fi(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=t[4],l=t[5],f=t[6],u=t[7],i=t[8],o=t[9],h=t[10],d=t[11],v=t[12],_=t[13],p=t[14],m=t[15],y=r*l-n*c,g=r*f-a*c,M=r*u-s*c,A=n*f-a*l,w=n*u-s*l,D=a*u-s*f,R=i*_-o*v,k=i*p-h*v,E=i*m-d*v,F=o*p-h*_,j=o*m-d*_,q=h*m-d*p,L=y*q-g*j+M*F+A*E-w*k+D*R;return L?(L=1/L,e[0]=(l*q-f*j+u*F)*L,e[1]=(a*j-n*q-s*F)*L,e[2]=(_*D-p*w+m*A)*L,e[3]=(h*w-o*D-d*A)*L,e[4]=(f*E-c*q-u*k)*L,e[5]=(r*q-a*E+s*k)*L,e[6]=(p*M-v*D-m*g)*L,e[7]=(i*D-h*M+d*g)*L,e[8]=(c*j-l*E+u*R)*L,e[9]=(n*E-r*j-s*R)*L,e[10]=(v*w-_*M+m*y)*L,e[11]=(o*M-i*w-d*y)*L,e[12]=(l*k-c*F-f*R)*L,e[13]=(r*F-n*k+a*R)*L,e[14]=(_*g-v*A-p*y)*L,e[15]=(i*A-o*g+h*y)*L,e):null}function hi(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=t[4],l=t[5],f=t[6],u=t[7],i=t[8],o=t[9],h=t[10],d=t[11],v=t[12],_=t[13],p=t[14],m=t[15];return e[0]=l*(h*m-d*p)-o*(f*m-u*p)+_*(f*d-u*h),e[1]=-(n*(h*m-d*p)-o*(a*m-s*p)+_*(a*d-s*h)),e[2]=n*(f*m-u*p)-l*(a*m-s*p)+_*(a*u-s*f),e[3]=-(n*(f*d-u*h)-l*(a*d-s*h)+o*(a*u-s*f)),e[4]=-(c*(h*m-d*p)-i*(f*m-u*p)+v*(f*d-u*h)),e[5]=r*(h*m-d*p)-i*(a*m-s*p)+v*(a*d-s*h),e[6]=-(r*(f*m-u*p)-c*(a*m-s*p)+v*(a*u-s*f)),e[7]=r*(f*d-u*h)-c*(a*d-s*h)+i*(a*u-s*f),e[8]=c*(o*m-d*_)-i*(l*m-u*_)+v*(l*d-u*o),e[9]=-(r*(o*m-d*_)-i*(n*m-s*_)+v*(n*d-s*o)),e[10]=r*(l*m-u*_)-c*(n*m-s*_)+v*(n*u-s*l),e[11]=-(r*(l*d-u*o)-c*(n*d-s*o)+i*(n*u-s*l)),e[12]=-(c*(o*p-h*_)-i*(l*p-f*_)+v*(l*h-f*o)),e[13]=r*(o*p-h*_)-i*(n*p-a*_)+v*(n*h-a*o),e[14]=-(r*(l*p-f*_)-c*(n*p-a*_)+v*(n*f-a*l)),e[15]=r*(l*h-f*o)-c*(n*h-a*o)+i*(n*f-a*l),e}function di(e){var t=e[0],r=e[1],n=e[2],a=e[3],s=e[4],c=e[5],l=e[6],f=e[7],u=e[8],i=e[9],o=e[10],h=e[11],d=e[12],v=e[13],_=e[14],p=e[15],m=t*c-r*s,y=t*l-n*s,g=t*f-a*s,M=r*l-n*c,A=r*f-a*c,w=n*f-a*l,D=u*v-i*d,R=u*_-o*d,k=u*p-h*d,E=i*_-o*v,F=i*p-h*v,j=o*p-h*_;return m*j-y*F+g*E+M*k-A*R+w*D}function et(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=t[8],h=t[9],d=t[10],v=t[11],_=t[12],p=t[13],m=t[14],y=t[15],g=r[0],M=r[1],A=r[2],w=r[3];return e[0]=g*n+M*l+A*o+w*_,e[1]=g*a+M*f+A*h+w*p,e[2]=g*s+M*u+A*d+w*m,e[3]=g*c+M*i+A*v+w*y,g=r[4],M=r[5],A=r[6],w=r[7],e[4]=g*n+M*l+A*o+w*_,e[5]=g*a+M*f+A*h+w*p,e[6]=g*s+M*u+A*d+w*m,e[7]=g*c+M*i+A*v+w*y,g=r[8],M=r[9],A=r[10],w=r[11],e[8]=g*n+M*l+A*o+w*_,e[9]=g*a+M*f+A*h+w*p,e[10]=g*s+M*u+A*d+w*m,e[11]=g*c+M*i+A*v+w*y,g=r[12],M=r[13],A=r[14],w=r[15],e[12]=g*n+M*l+A*o+w*_,e[13]=g*a+M*f+A*h+w*p,e[14]=g*s+M*u+A*d+w*m,e[15]=g*c+M*i+A*v+w*y,e}function ui(e,t,r){var n=r[0],a=r[1],s=r[2],c,l,f,u,i,o,h,d,v,_,p,m;return t===e?(e[12]=t[0]*n+t[4]*a+t[8]*s+t[12],e[13]=t[1]*n+t[5]*a+t[9]*s+t[13],e[14]=t[2]*n+t[6]*a+t[10]*s+t[14],e[15]=t[3]*n+t[7]*a+t[11]*s+t[15]):(c=t[0],l=t[1],f=t[2],u=t[3],i=t[4],o=t[5],h=t[6],d=t[7],v=t[8],_=t[9],p=t[10],m=t[11],e[0]=c,e[1]=l,e[2]=f,e[3]=u,e[4]=i,e[5]=o,e[6]=h,e[7]=d,e[8]=v,e[9]=_,e[10]=p,e[11]=m,e[12]=c*n+i*a+v*s+t[12],e[13]=l*n+o*a+_*s+t[13],e[14]=f*n+h*a+p*s+t[14],e[15]=u*n+d*a+m*s+t[15]),e}function pi(e,t,r){var n=r[0],a=r[1],s=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function vi(e,t,r,n){var a=n[0],s=n[1],c=n[2],l=Math.hypot(a,s,c),f,u,i,o,h,d,v,_,p,m,y,g,M,A,w,D,R,k,E,F,j,q,L,Q;return l<z.EPSILON?null:(l=1/l,a*=l,s*=l,c*=l,f=Math.sin(r),u=Math.cos(r),i=1-u,o=t[0],h=t[1],d=t[2],v=t[3],_=t[4],p=t[5],m=t[6],y=t[7],g=t[8],M=t[9],A=t[10],w=t[11],D=a*a*i+u,R=s*a*i+c*f,k=c*a*i-s*f,E=a*s*i-c*f,F=s*s*i+u,j=c*s*i+a*f,q=a*c*i+s*f,L=s*c*i-a*f,Q=c*c*i+u,e[0]=o*D+_*R+g*k,e[1]=h*D+p*R+M*k,e[2]=d*D+m*R+A*k,e[3]=v*D+y*R+w*k,e[4]=o*E+_*F+g*j,e[5]=h*E+p*F+M*j,e[6]=d*E+m*F+A*j,e[7]=v*E+y*F+w*j,e[8]=o*q+_*L+g*Q,e[9]=h*q+p*L+M*Q,e[10]=d*q+m*L+A*Q,e[11]=v*q+y*L+w*Q,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function _i(e,t,r){var n=Math.sin(r),a=Math.cos(r),s=t[4],c=t[5],l=t[6],f=t[7],u=t[8],i=t[9],o=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*a+u*n,e[5]=c*a+i*n,e[6]=l*a+o*n,e[7]=f*a+h*n,e[8]=u*a-s*n,e[9]=i*a-c*n,e[10]=o*a-l*n,e[11]=h*a-f*n,e}function mi(e,t,r){var n=Math.sin(r),a=Math.cos(r),s=t[0],c=t[1],l=t[2],f=t[3],u=t[8],i=t[9],o=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a-u*n,e[1]=c*a-i*n,e[2]=l*a-o*n,e[3]=f*a-h*n,e[8]=s*n+u*a,e[9]=c*n+i*a,e[10]=l*n+o*a,e[11]=f*n+h*a,e}function yi(e,t,r){var n=Math.sin(r),a=Math.cos(r),s=t[0],c=t[1],l=t[2],f=t[3],u=t[4],i=t[5],o=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a+u*n,e[1]=c*a+i*n,e[2]=l*a+o*n,e[3]=f*a+h*n,e[4]=u*a-s*n,e[5]=i*a-c*n,e[6]=o*a-l*n,e[7]=h*a-f*n,e}function gi(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Mi(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xi(e,t,r){var n=r[0],a=r[1],s=r[2],c=Math.hypot(n,a,s),l,f,u;return c<z.EPSILON?null:(c=1/c,n*=c,a*=c,s*=c,l=Math.sin(t),f=Math.cos(t),u=1-f,e[0]=n*n*u+f,e[1]=a*n*u+s*l,e[2]=s*n*u-a*l,e[3]=0,e[4]=n*a*u-s*l,e[5]=a*a*u+f,e[6]=s*a*u+n*l,e[7]=0,e[8]=n*s*u+a*l,e[9]=a*s*u-n*l,e[10]=s*s*u+f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function bi(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ai(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function wi(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function tt(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=n+n,f=a+a,u=s+s,i=n*l,o=n*f,h=n*u,d=a*f,v=a*u,_=s*u,p=c*l,m=c*f,y=c*u;return e[0]=1-(d+_),e[1]=o+y,e[2]=h-m,e[3]=0,e[4]=o-y,e[5]=1-(i+_),e[6]=v+p,e[7]=0,e[8]=h+m,e[9]=v-p,e[10]=1-(i+d),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Ti(e,t){var r=new z.ARRAY_TYPE(3),n=-t[0],a=-t[1],s=-t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=n*n+a*a+s*s+c*c;return o>0?(r[0]=(l*c+i*n+f*s-u*a)*2/o,r[1]=(f*c+i*a+u*n-l*s)*2/o,r[2]=(u*c+i*s+l*a-f*n)*2/o):(r[0]=(l*c+i*n+f*s-u*a)*2,r[1]=(f*c+i*a+u*n-l*s)*2,r[2]=(u*c+i*s+l*a-f*n)*2),tt(e,t,r),e}function Si(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function rt(e,t){var r=t[0],n=t[1],a=t[2],s=t[4],c=t[5],l=t[6],f=t[8],u=t[9],i=t[10];return e[0]=Math.hypot(r,n,a),e[1]=Math.hypot(s,c,l),e[2]=Math.hypot(f,u,i),e}function Oi(e,t){var r=new z.ARRAY_TYPE(3);rt(r,t);var n=1/r[0],a=1/r[1],s=1/r[2],c=t[0]*n,l=t[1]*a,f=t[2]*s,u=t[4]*n,i=t[5]*a,o=t[6]*s,h=t[8]*n,d=t[9]*a,v=t[10]*s,_=c+i+v,p=0;return _>0?(p=Math.sqrt(_+1)*2,e[3]=.25*p,e[0]=(o-d)/p,e[1]=(h-f)/p,e[2]=(l-u)/p):c>i&&c>v?(p=Math.sqrt(1+c-i-v)*2,e[3]=(o-d)/p,e[0]=.25*p,e[1]=(l+u)/p,e[2]=(h+f)/p):i>v?(p=Math.sqrt(1+i-c-v)*2,e[3]=(h-f)/p,e[0]=(l+u)/p,e[1]=.25*p,e[2]=(o+d)/p):(p=Math.sqrt(1+v-c-i)*2,e[3]=(l-u)/p,e[0]=(h+f)/p,e[1]=(o+d)/p,e[2]=.25*p),e}function Ri(e,t,r,n){var a=t[0],s=t[1],c=t[2],l=t[3],f=a+a,u=s+s,i=c+c,o=a*f,h=a*u,d=a*i,v=s*u,_=s*i,p=c*i,m=l*f,y=l*u,g=l*i,M=n[0],A=n[1],w=n[2];return e[0]=(1-(v+p))*M,e[1]=(h+g)*M,e[2]=(d-y)*M,e[3]=0,e[4]=(h-g)*A,e[5]=(1-(o+p))*A,e[6]=(_+m)*A,e[7]=0,e[8]=(d+y)*w,e[9]=(_-m)*w,e[10]=(1-(o+v))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Pi(e,t,r,n,a){var s=t[0],c=t[1],l=t[2],f=t[3],u=s+s,i=c+c,o=l+l,h=s*u,d=s*i,v=s*o,_=c*i,p=c*o,m=l*o,y=f*u,g=f*i,M=f*o,A=n[0],w=n[1],D=n[2],R=a[0],k=a[1],E=a[2],F=(1-(_+m))*A,j=(d+M)*A,q=(v-g)*A,L=(d-M)*w,Q=(1-(h+m))*w,fe=(p+y)*w,he=(v+g)*D,je=(p-y)*D,ze=(1-(h+_))*D;return e[0]=F,e[1]=j,e[2]=q,e[3]=0,e[4]=L,e[5]=Q,e[6]=fe,e[7]=0,e[8]=he,e[9]=je,e[10]=ze,e[11]=0,e[12]=r[0]+R-(F*R+L*k+he*E),e[13]=r[1]+k-(j*R+Q*k+je*E),e[14]=r[2]+E-(q*R+fe*k+ze*E),e[15]=1,e}function Li(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=r+r,l=n+n,f=a+a,u=r*c,i=n*c,o=n*l,h=a*c,d=a*l,v=a*f,_=s*c,p=s*l,m=s*f;return e[0]=1-o-v,e[1]=i+m,e[2]=h-p,e[3]=0,e[4]=i-m,e[5]=1-u-v,e[6]=d+_,e[7]=0,e[8]=h+p,e[9]=d-_,e[10]=1-u-o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ii(e,t,r,n,a,s,c){var l=1/(r-t),f=1/(a-n),u=1/(s-c);return e[0]=s*2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*f,e[6]=0,e[7]=0,e[8]=(r+t)*l,e[9]=(a+n)*f,e[10]=(c+s)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=c*s*2*u,e[15]=0,e}function Ei(e,t,r,n,a){var s=1/Math.tan(t/2),c;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==Infinity?(c=1/(n-a),e[10]=(a+n)*c,e[14]=2*a*n*c):(e[10]=-1,e[14]=-2*n),e}function qi(e,t,r,n){var a=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),c=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),f=2/(c+l),u=2/(a+s);return e[0]=f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((c-l)*f*.5),e[9]=(a-s)*u*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function Wi(e,t,r,n,a,s,c){var l=1/(t-r),f=1/(n-a),u=1/(s-c);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*l,e[13]=(a+n)*f,e[14]=(c+s)*u,e[15]=1,e}function Ci(e,t,r,n){var a,s,c,l,f,u,i,o,h,d,v=t[0],_=t[1],p=t[2],m=n[0],y=n[1],g=n[2],M=r[0],A=r[1],w=r[2];return Math.abs(v-M)<z.EPSILON&&Math.abs(_-A)<z.EPSILON&&Math.abs(p-w)<z.EPSILON?Ke(e):(i=v-M,o=_-A,h=p-w,d=1/Math.hypot(i,o,h),i*=d,o*=d,h*=d,a=y*h-g*o,s=g*i-m*h,c=m*o-y*i,d=Math.hypot(a,s,c),d?(d=1/d,a*=d,s*=d,c*=d):(a=0,s=0,c=0),l=o*c-h*s,f=h*a-i*c,u=i*s-o*a,d=Math.hypot(l,f,u),d?(d=1/d,l*=d,f*=d,u*=d):(l=0,f=0,u=0),e[0]=a,e[1]=l,e[2]=i,e[3]=0,e[4]=s,e[5]=f,e[6]=o,e[7]=0,e[8]=c,e[9]=u,e[10]=h,e[11]=0,e[12]=-(a*v+s*_+c*p),e[13]=-(l*v+f*_+u*p),e[14]=-(i*v+o*_+h*p),e[15]=1,e)}function Di(e,t,r,n){var a=t[0],s=t[1],c=t[2],l=n[0],f=n[1],u=n[2],i=a-r[0],o=s-r[1],h=c-r[2],d=i*i+o*o+h*h;d>0&&(d=1/Math.sqrt(d),i*=d,o*=d,h*=d);var v=f*h-u*o,_=u*i-l*h,p=l*o-f*i;return d=v*v+_*_+p*p,d>0&&(d=1/Math.sqrt(d),v*=d,_*=d,p*=d),e[0]=v,e[1]=_,e[2]=p,e[3]=0,e[4]=o*p-h*_,e[5]=h*v-i*p,e[6]=i*_-o*v,e[7]=0,e[8]=i,e[9]=o,e[10]=h,e[11]=0,e[12]=a,e[13]=s,e[14]=c,e[15]=1,e}function ki(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function ji(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function zi(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function nt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function Fi(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function Yi(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function Hi(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Vi(e,t){var r=e[0],n=e[1],a=e[2],s=e[3],c=e[4],l=e[5],f=e[6],u=e[7],i=e[8],o=e[9],h=e[10],d=e[11],v=e[12],_=e[13],p=e[14],m=e[15],y=t[0],g=t[1],M=t[2],A=t[3],w=t[4],D=t[5],R=t[6],k=t[7],E=t[8],F=t[9],j=t[10],q=t[11],L=t[12],Q=t[13],fe=t[14],he=t[15];return Math.abs(r-y)<=z.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-g)<=z.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(a-M)<=z.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(s-A)<=z.EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(c-w)<=z.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(l-D)<=z.EPSILON*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(f-R)<=z.EPSILON*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(u-k)<=z.EPSILON*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(i-E)<=z.EPSILON*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(o-F)<=z.EPSILON*Math.max(1,Math.abs(o),Math.abs(F))&&Math.abs(h-j)<=z.EPSILON*Math.max(1,Math.abs(h),Math.abs(j))&&Math.abs(d-q)<=z.EPSILON*Math.max(1,Math.abs(d),Math.abs(q))&&Math.abs(v-L)<=z.EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(_-Q)<=z.EPSILON*Math.max(1,Math.abs(_),Math.abs(Q))&&Math.abs(p-fe)<=z.EPSILON*Math.max(1,Math.abs(p),Math.abs(fe))&&Math.abs(m-he)<=z.EPSILON*Math.max(1,Math.abs(m),Math.abs(he))}var Xi=et;S.mul=Xi;var Bi=nt;S.sub=Bi});var Le=H(b=>{"use strict";function _e(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_e=function(r){return typeof r}:_e=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_e(e)}Object.defineProperty(b,"__esModule",{value:!0});b.create=at;b.clone=Gi;b.length=st;b.fromValues=Qi;b.copy=Zi;b.set=Ui;b.add=$i;b.subtract=ot;b.multiply=ct;b.divide=lt;b.ceil=Ji;b.floor=Ki;b.min=ea;b.max=ta;b.round=ra;b.scale=na;b.scaleAndAdd=ia;b.distance=ft;b.squaredDistance=ht;b.squaredLength=dt;b.negate=aa;b.inverse=sa;b.normalize=oa;b.dot=ut;b.cross=ca;b.lerp=la;b.hermite=fa;b.bezier=ha;b.random=da;b.transformMat4=ua;b.transformMat3=pa;b.transformQuat=va;b.rotateX=_a;b.rotateY=ma;b.rotateZ=ya;b.angle=ga;b.zero=Ma;b.str=xa;b.exactEquals=ba;b.equals=Aa;b.forEach=b.sqrLen=b.len=b.sqrDist=b.dist=b.div=b.mul=b.sub=void 0;var ee=wa(Z());function pt(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return pt=function(){return e},e}function wa(e){if(e&&e.__esModule)return e;if(e===null||_e(e)!=="object"&&typeof e!="function")return{default:e};var t=pt();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function at(){var e=new ee.ARRAY_TYPE(3);return ee.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Gi(e){var t=new ee.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function st(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function Qi(e,t,r){var n=new ee.ARRAY_TYPE(3);return n[0]=e,n[1]=t,n[2]=r,n}function Zi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ui(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function $i(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function ot(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function ct(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function lt(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function Ji(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Ki(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function ea(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function ta(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function ra(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function na(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function ia(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function ft(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return Math.hypot(r,n,a)}function ht(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return r*r+n*n+a*a}function dt(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function aa(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function sa(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function oa(e,t){var r=t[0],n=t[1],a=t[2],s=r*r+n*n+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function ut(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ca(e,t,r){var n=t[0],a=t[1],s=t[2],c=r[0],l=r[1],f=r[2];return e[0]=a*f-s*l,e[1]=s*c-n*f,e[2]=n*l-a*c,e}function la(e,t,r,n){var a=t[0],s=t[1],c=t[2];return e[0]=a+n*(r[0]-a),e[1]=s+n*(r[1]-s),e[2]=c+n*(r[2]-c),e}function fa(e,t,r,n,a,s){var c=s*s,l=c*(2*s-3)+1,f=c*(s-2)+s,u=c*(s-1),i=c*(3-2*s);return e[0]=t[0]*l+r[0]*f+n[0]*u+a[0]*i,e[1]=t[1]*l+r[1]*f+n[1]*u+a[1]*i,e[2]=t[2]*l+r[2]*f+n[2]*u+a[2]*i,e}function ha(e,t,r,n,a,s){var c=1-s,l=c*c,f=s*s,u=l*c,i=3*s*l,o=3*f*c,h=f*s;return e[0]=t[0]*u+r[0]*i+n[0]*o+a[0]*h,e[1]=t[1]*u+r[1]*i+n[1]*o+a[1]*h,e[2]=t[2]*u+r[2]*i+n[2]*o+a[2]*h,e}function da(e,t){t=t||1;var r=ee.RANDOM()*2*Math.PI,n=ee.RANDOM()*2-1,a=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=n*t,e}function ua(e,t,r){var n=t[0],a=t[1],s=t[2],c=r[3]*n+r[7]*a+r[11]*s+r[15];return c=c||1,e[0]=(r[0]*n+r[4]*a+r[8]*s+r[12])/c,e[1]=(r[1]*n+r[5]*a+r[9]*s+r[13])/c,e[2]=(r[2]*n+r[6]*a+r[10]*s+r[14])/c,e}function pa(e,t,r){var n=t[0],a=t[1],s=t[2];return e[0]=n*r[0]+a*r[3]+s*r[6],e[1]=n*r[1]+a*r[4]+s*r[7],e[2]=n*r[2]+a*r[5]+s*r[8],e}function va(e,t,r){var n=r[0],a=r[1],s=r[2],c=r[3],l=t[0],f=t[1],u=t[2],i=a*u-s*f,o=s*l-n*u,h=n*f-a*l,d=a*h-s*o,v=s*i-n*h,_=n*o-a*i,p=c*2;return i*=p,o*=p,h*=p,d*=2,v*=2,_*=2,e[0]=l+i+d,e[1]=f+o+v,e[2]=u+h+_,e}function _a(e,t,r,n){var a=[],s=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],s[0]=a[0],s[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),s[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function ma(e,t,r,n){var a=[],s=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],s[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),s[1]=a[1],s[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function ya(e,t,r,n){var a=[],s=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],s[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),s[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),s[2]=a[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function ga(e,t){var r=e[0],n=e[1],a=e[2],s=t[0],c=t[1],l=t[2],f=Math.sqrt(r*r+n*n+a*a),u=Math.sqrt(s*s+c*c+l*l),i=f*u,o=i&&ut(e,t)/i;return Math.acos(Math.min(Math.max(o,-1),1))}function Ma(e){return e[0]=0,e[1]=0,e[2]=0,e}function xa(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function ba(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Aa(e,t){var r=e[0],n=e[1],a=e[2],s=t[0],c=t[1],l=t[2];return Math.abs(r-s)<=ee.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-c)<=ee.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-l)<=ee.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))}var Ta=ot;b.sub=Ta;var Sa=ct;b.mul=Sa;var Oa=lt;b.div=Oa;var Ra=ft;b.dist=Ra;var Pa=ht;b.sqrDist=Pa;var La=st;b.len=La;var Ia=dt;b.sqrLen=Ia;var Ea=function(){var e=at();return function(t,r,n,a,s,c){var l,f;for(r||(r=3),n||(n=0),a?f=Math.min(a*r+n,t.length):f=t.length,l=n;l<f;l+=r)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],s(e,e,c),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2];return t}}();b.forEach=Ea});var Ie=H(O=>{"use strict";function me(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?me=function(r){return typeof r}:me=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},me(e)}Object.defineProperty(O,"__esModule",{value:!0});O.create=vt;O.clone=qa;O.fromValues=Wa;O.copy=Ca;O.set=Da;O.add=ka;O.subtract=_t;O.multiply=mt;O.divide=yt;O.ceil=ja;O.floor=za;O.min=Fa;O.max=Ya;O.round=Ha;O.scale=Va;O.scaleAndAdd=Na;O.distance=gt;O.squaredDistance=Mt;O.length=xt;O.squaredLength=bt;O.negate=Xa;O.inverse=Ba;O.normalize=Ga;O.dot=Qa;O.cross=Za;O.lerp=Ua;O.random=$a;O.transformMat4=Ja;O.transformQuat=Ka;O.zero=es;O.str=ts;O.exactEquals=rs;O.equals=ns;O.forEach=O.sqrLen=O.len=O.sqrDist=O.dist=O.div=O.mul=O.sub=void 0;var G=is(Z());function At(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return At=function(){return e},e}function is(e){if(e&&e.__esModule)return e;if(e===null||me(e)!=="object"&&typeof e!="function")return{default:e};var t=At();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function vt(){var e=new G.ARRAY_TYPE(4);return G.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function qa(e){var t=new G.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Wa(e,t,r,n){var a=new G.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a}function Ca(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Da(e,t,r,n,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e}function ka(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function _t(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function mt(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function yt(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function ja(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function za(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Fa(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function Ya(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function Ha(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Va(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Na(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}function gt(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2],s=t[3]-e[3];return Math.hypot(r,n,a,s)}function Mt(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2],s=t[3]-e[3];return r*r+n*n+a*a+s*s}function xt(e){var t=e[0],r=e[1],n=e[2],a=e[3];return Math.hypot(t,r,n,a)}function bt(e){var t=e[0],r=e[1],n=e[2],a=e[3];return t*t+r*r+n*n+a*a}function Xa(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Ba(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function Ga(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=r*r+n*n+a*a+s*s;return c>0&&(c=1/Math.sqrt(c)),e[0]=r*c,e[1]=n*c,e[2]=a*c,e[3]=s*c,e}function Qa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Za(e,t,r,n){var a=r[0]*n[1]-r[1]*n[0],s=r[0]*n[2]-r[2]*n[0],c=r[0]*n[3]-r[3]*n[0],l=r[1]*n[2]-r[2]*n[1],f=r[1]*n[3]-r[3]*n[1],u=r[2]*n[3]-r[3]*n[2],i=t[0],o=t[1],h=t[2],d=t[3];return e[0]=o*u-h*f+d*l,e[1]=-(i*u)+h*c-d*s,e[2]=i*f-o*c+d*a,e[3]=-(i*l)+o*s-h*a,e}function Ua(e,t,r,n){var a=t[0],s=t[1],c=t[2],l=t[3];return e[0]=a+n*(r[0]-a),e[1]=s+n*(r[1]-s),e[2]=c+n*(r[2]-c),e[3]=l+n*(r[3]-l),e}function $a(e,t){t=t||1;var r,n,a,s,c,l;do r=G.RANDOM()*2-1,n=G.RANDOM()*2-1,c=r*r+n*n;while(c>=1);do a=G.RANDOM()*2-1,s=G.RANDOM()*2-1,l=a*a+s*s;while(l>=1);var f=Math.sqrt((1-c)/l);return e[0]=t*r,e[1]=t*n,e[2]=t*a*f,e[3]=t*s*f,e}function Ja(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3];return e[0]=r[0]*n+r[4]*a+r[8]*s+r[12]*c,e[1]=r[1]*n+r[5]*a+r[9]*s+r[13]*c,e[2]=r[2]*n+r[6]*a+r[10]*s+r[14]*c,e[3]=r[3]*n+r[7]*a+r[11]*s+r[15]*c,e}function Ka(e,t,r){var n=t[0],a=t[1],s=t[2],c=r[0],l=r[1],f=r[2],u=r[3],i=u*n+l*s-f*a,o=u*a+f*n-c*s,h=u*s+c*a-l*n,d=-c*n-l*a-f*s;return e[0]=i*u+d*-c+o*-f-h*-l,e[1]=o*u+d*-l+h*-c-i*-f,e[2]=h*u+d*-f+i*-l-o*-c,e[3]=t[3],e}function es(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function ts(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function rs(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function ns(e,t){var r=e[0],n=e[1],a=e[2],s=e[3],c=t[0],l=t[1],f=t[2],u=t[3];return Math.abs(r-c)<=G.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-l)<=G.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-f)<=G.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-u)<=G.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))}var as=_t;O.sub=as;var ss=mt;O.mul=ss;var os=yt;O.div=os;var cs=gt;O.dist=cs;var ls=Mt;O.sqrDist=ls;var fs=xt;O.len=fs;var hs=bt;O.sqrLen=hs;var ds=function(){var e=vt();return function(t,r,n,a,s,c){var l,f;for(r||(r=4),n||(n=0),a?f=Math.min(a*r+n,t.length):f=t.length,l=n;l<f;l+=r)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],s(e,e,c),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}}();O.forEach=ds});var We=H(x=>{"use strict";function ye(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ye=function(r){return typeof r}:ye=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ye(e)}Object.defineProperty(x,"__esModule",{value:!0});x.create=Ee;x.identity=us;x.setAxisAngle=wt;x.getAxisAngle=ps;x.getAngle=vs;x.multiply=Tt;x.rotateX=_s;x.rotateY=ms;x.rotateZ=ys;x.calculateW=gs;x.exp=St;x.ln=Ot;x.pow=Ms;x.slerp=ge;x.random=xs;x.invert=bs;x.conjugate=As;x.fromMat3=Rt;x.fromEuler=ws;x.str=Ts;x.setAxes=x.sqlerp=x.rotationTo=x.equals=x.exactEquals=x.normalize=x.sqrLen=x.squaredLength=x.len=x.length=x.lerp=x.dot=x.scale=x.mul=x.add=x.set=x.copy=x.fromValues=x.clone=void 0;var oe=Me(Z()),Ss=Me(Re()),te=Me(Le()),X=Me(Ie());function Pt(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return Pt=function(){return e},e}function Me(e){if(e&&e.__esModule)return e;if(e===null||ye(e)!=="object"&&typeof e!="function")return{default:e};var t=Pt();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function Ee(){var e=new oe.ARRAY_TYPE(4);return oe.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function us(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function wt(e,t,r){r=r*.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function ps(e,t){var r=Math.acos(t[3])*2,n=Math.sin(r/2);return n>oe.EPSILON?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),r}function vs(e,t){var r=Lt(e,t);return Math.acos(2*r*r-1)}function Tt(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=r[0],f=r[1],u=r[2],i=r[3];return e[0]=n*i+c*l+a*u-s*f,e[1]=a*i+c*f+s*l-n*u,e[2]=s*i+c*u+n*f-a*l,e[3]=c*i-n*l-a*f-s*u,e}function _s(e,t,r){r*=.5;var n=t[0],a=t[1],s=t[2],c=t[3],l=Math.sin(r),f=Math.cos(r);return e[0]=n*f+c*l,e[1]=a*f+s*l,e[2]=s*f-a*l,e[3]=c*f-n*l,e}function ms(e,t,r){r*=.5;var n=t[0],a=t[1],s=t[2],c=t[3],l=Math.sin(r),f=Math.cos(r);return e[0]=n*f-s*l,e[1]=a*f+c*l,e[2]=s*f+n*l,e[3]=c*f-a*l,e}function ys(e,t,r){r*=.5;var n=t[0],a=t[1],s=t[2],c=t[3],l=Math.sin(r),f=Math.cos(r);return e[0]=n*f+a*l,e[1]=a*f-n*l,e[2]=s*f+c*l,e[3]=c*f-s*l,e}function gs(e,t){var r=t[0],n=t[1],a=t[2];return e[0]=r,e[1]=n,e[2]=a,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),e}function St(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=Math.sqrt(r*r+n*n+a*a),l=Math.exp(s),f=c>0?l*Math.sin(c)/c:0;return e[0]=r*f,e[1]=n*f,e[2]=a*f,e[3]=l*Math.cos(c),e}function Ot(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=Math.sqrt(r*r+n*n+a*a),l=c>0?Math.atan2(c,s)/c:0;return e[0]=r*l,e[1]=n*l,e[2]=a*l,e[3]=.5*Math.log(r*r+n*n+a*a+s*s),e}function Ms(e,t,r){return Ot(e,t),It(e,e,r),St(e,e),e}function ge(e,t,r,n){var a=t[0],s=t[1],c=t[2],l=t[3],f=r[0],u=r[1],i=r[2],o=r[3],h,d,v,_,p;return d=a*f+s*u+c*i+l*o,d<0&&(d=-d,f=-f,u=-u,i=-i,o=-o),1-d>oe.EPSILON?(h=Math.acos(d),v=Math.sin(h),_=Math.sin((1-n)*h)/v,p=Math.sin(n*h)/v):(_=1-n,p=n),e[0]=_*a+p*f,e[1]=_*s+p*u,e[2]=_*c+p*i,e[3]=_*l+p*o,e}function xs(e){var t=oe.RANDOM(),r=oe.RANDOM(),n=oe.RANDOM(),a=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*r),e[1]=a*Math.cos(2*Math.PI*r),e[2]=s*Math.sin(2*Math.PI*n),e[3]=s*Math.cos(2*Math.PI*n),e}function bs(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=r*r+n*n+a*a+s*s,l=c?1/c:0;return e[0]=-r*l,e[1]=-n*l,e[2]=-a*l,e[3]=s*l,e}function As(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Rt(e,t){var r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[a*3+a]&&(a=2);var s=(a+1)%3,c=(a+2)%3;n=Math.sqrt(t[a*3+a]-t[s*3+s]-t[c*3+c]+1),e[a]=.5*n,n=.5/n,e[3]=(t[s*3+c]-t[c*3+s])*n,e[s]=(t[s*3+a]+t[a*3+s])*n,e[c]=(t[c*3+a]+t[a*3+c])*n}return e}function ws(e,t,r,n){var a=.5*Math.PI/180;t*=a,r*=a,n*=a;var s=Math.sin(t),c=Math.cos(t),l=Math.sin(r),f=Math.cos(r),u=Math.sin(n),i=Math.cos(n);return e[0]=s*f*i-c*l*u,e[1]=c*l*i+s*f*u,e[2]=c*f*u-s*l*i,e[3]=c*f*i+s*l*u,e}function Ts(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Os=X.clone;x.clone=Os;var Rs=X.fromValues;x.fromValues=Rs;var Ps=X.copy;x.copy=Ps;var Ls=X.set;x.set=Ls;var Is=X.add;x.add=Is;var Es=Tt;x.mul=Es;var It=X.scale;x.scale=It;var Lt=X.dot;x.dot=Lt;var qs=X.lerp;x.lerp=qs;var Et=X.length;x.length=Et;var Ws=Et;x.len=Ws;var qt=X.squaredLength;x.squaredLength=qt;var Cs=qt;x.sqrLen=Cs;var qe=X.normalize;x.normalize=qe;var Ds=X.exactEquals;x.exactEquals=Ds;var ks=X.equals;x.equals=ks;var js=function(){var e=te.create(),t=te.fromValues(1,0,0),r=te.fromValues(0,1,0);return function(n,a,s){var c=te.dot(a,s);return c<-.999999?(te.cross(e,t,a),te.len(e)<1e-6&&te.cross(e,r,a),te.normalize(e,e),wt(n,e,Math.PI),n):c>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(te.cross(e,a,s),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+c,qe(n,n))}}();x.rotationTo=js;var zs=function(){var e=Ee(),t=Ee();return function(r,n,a,s,c,l){return ge(e,n,c,l),ge(t,a,s,l),ge(r,e,t,2*l*(1-l)),r}}();x.sqlerp=zs;var Fs=function(){var e=Ss.create();return function(t,r,n,a){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=a[0],e[4]=a[1],e[7]=a[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],qe(t,Rt(t,e))}}();x.setAxes=Fs});var Yt=H(P=>{"use strict";function xe(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xe=function(r){return typeof r}:xe=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xe(e)}Object.defineProperty(P,"__esModule",{value:!0});P.create=Ys;P.clone=Hs;P.fromValues=Vs;P.fromRotationTranslationValues=Ns;P.fromRotationTranslation=Wt;P.fromTranslation=Xs;P.fromRotation=Bs;P.fromMat4=Gs;P.copy=Ct;P.identity=Qs;P.set=Zs;P.getDual=Us;P.setDual=$s;P.getTranslation=Js;P.translate=Ks;P.rotateX=eo;P.rotateY=to;P.rotateZ=ro;P.rotateByQuatAppend=no;P.rotateByQuatPrepend=io;P.rotateAroundAxis=ao;P.add=so;P.multiply=Dt;P.scale=oo;P.lerp=co;P.invert=lo;P.conjugate=fo;P.normalize=ho;P.str=uo;P.exactEquals=po;P.equals=vo;P.sqrLen=P.squaredLength=P.len=P.length=P.dot=P.mul=P.setReal=P.getReal=void 0;var V=Ce(Z()),re=Ce(We()),kt=Ce(Pe());function jt(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return jt=function(){return e},e}function Ce(e){if(e&&e.__esModule)return e;if(e===null||xe(e)!=="object"&&typeof e!="function")return{default:e};var t=jt();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function Ys(){var e=new V.ARRAY_TYPE(8);return V.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function Hs(e){var t=new V.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Vs(e,t,r,n,a,s,c,l){var f=new V.ARRAY_TYPE(8);return f[0]=e,f[1]=t,f[2]=r,f[3]=n,f[4]=a,f[5]=s,f[6]=c,f[7]=l,f}function Ns(e,t,r,n,a,s,c){var l=new V.ARRAY_TYPE(8);l[0]=e,l[1]=t,l[2]=r,l[3]=n;var f=a*.5,u=s*.5,i=c*.5;return l[4]=f*n+u*r-i*t,l[5]=u*n+i*e-f*r,l[6]=i*n+f*t-u*e,l[7]=-f*e-u*t-i*r,l}function Wt(e,t,r){var n=r[0]*.5,a=r[1]*.5,s=r[2]*.5,c=t[0],l=t[1],f=t[2],u=t[3];return e[0]=c,e[1]=l,e[2]=f,e[3]=u,e[4]=n*u+a*f-s*l,e[5]=a*u+s*c-n*f,e[6]=s*u+n*l-a*c,e[7]=-n*c-a*l-s*f,e}function Xs(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0]*.5,e[5]=t[1]*.5,e[6]=t[2]*.5,e[7]=0,e}function Bs(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function Gs(e,t){var r=re.create();kt.getRotation(r,t);var n=new V.ARRAY_TYPE(3);return kt.getTranslation(n,t),Wt(e,r,n),e}function Ct(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Qs(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function Zs(e,t,r,n,a,s,c,l,f){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=s,e[5]=c,e[6]=l,e[7]=f,e}var _o=re.copy;P.getReal=_o;function Us(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var mo=re.copy;P.setReal=mo;function $s(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function Js(e,t){var r=t[4],n=t[5],a=t[6],s=t[7],c=-t[0],l=-t[1],f=-t[2],u=t[3];return e[0]=(r*u+s*c+n*f-a*l)*2,e[1]=(n*u+s*l+a*c-r*f)*2,e[2]=(a*u+s*f+r*l-n*c)*2,e}function Ks(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=r[0]*.5,f=r[1]*.5,u=r[2]*.5,i=t[4],o=t[5],h=t[6],d=t[7];return e[0]=n,e[1]=a,e[2]=s,e[3]=c,e[4]=c*l+a*u-s*f+i,e[5]=c*f+s*l-n*u+o,e[6]=c*u+n*f-a*l+h,e[7]=-n*l-a*f-s*u+d,e}function eo(e,t,r){var n=-t[0],a=-t[1],s=-t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=l*c+i*n+f*s-u*a,h=f*c+i*a+u*n-l*s,d=u*c+i*s+l*a-f*n,v=i*c-l*n-f*a-u*s;return re.rotateX(e,t,r),n=e[0],a=e[1],s=e[2],c=e[3],e[4]=o*c+v*n+h*s-d*a,e[5]=h*c+v*a+d*n-o*s,e[6]=d*c+v*s+o*a-h*n,e[7]=v*c-o*n-h*a-d*s,e}function to(e,t,r){var n=-t[0],a=-t[1],s=-t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=l*c+i*n+f*s-u*a,h=f*c+i*a+u*n-l*s,d=u*c+i*s+l*a-f*n,v=i*c-l*n-f*a-u*s;return re.rotateY(e,t,r),n=e[0],a=e[1],s=e[2],c=e[3],e[4]=o*c+v*n+h*s-d*a,e[5]=h*c+v*a+d*n-o*s,e[6]=d*c+v*s+o*a-h*n,e[7]=v*c-o*n-h*a-d*s,e}function ro(e,t,r){var n=-t[0],a=-t[1],s=-t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=l*c+i*n+f*s-u*a,h=f*c+i*a+u*n-l*s,d=u*c+i*s+l*a-f*n,v=i*c-l*n-f*a-u*s;return re.rotateZ(e,t,r),n=e[0],a=e[1],s=e[2],c=e[3],e[4]=o*c+v*n+h*s-d*a,e[5]=h*c+v*a+d*n-o*s,e[6]=d*c+v*s+o*a-h*n,e[7]=v*c-o*n-h*a-d*s,e}function no(e,t,r){var n=r[0],a=r[1],s=r[2],c=r[3],l=t[0],f=t[1],u=t[2],i=t[3];return e[0]=l*c+i*n+f*s-u*a,e[1]=f*c+i*a+u*n-l*s,e[2]=u*c+i*s+l*a-f*n,e[3]=i*c-l*n-f*a-u*s,l=t[4],f=t[5],u=t[6],i=t[7],e[4]=l*c+i*n+f*s-u*a,e[5]=f*c+i*a+u*n-l*s,e[6]=u*c+i*s+l*a-f*n,e[7]=i*c-l*n-f*a-u*s,e}function io(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=r[0],f=r[1],u=r[2],i=r[3];return e[0]=n*i+c*l+a*u-s*f,e[1]=a*i+c*f+s*l-n*u,e[2]=s*i+c*u+n*f-a*l,e[3]=c*i-n*l-a*f-s*u,l=r[4],f=r[5],u=r[6],i=r[7],e[4]=n*i+c*l+a*u-s*f,e[5]=a*i+c*f+s*l-n*u,e[6]=s*i+c*u+n*f-a*l,e[7]=c*i-n*l-a*f-s*u,e}function ao(e,t,r,n){if(Math.abs(n)<V.EPSILON)return Ct(e,t);var a=Math.hypot(r[0],r[1],r[2]);n=n*.5;var s=Math.sin(n),c=s*r[0]/a,l=s*r[1]/a,f=s*r[2]/a,u=Math.cos(n),i=t[0],o=t[1],h=t[2],d=t[3];e[0]=i*u+d*c+o*f-h*l,e[1]=o*u+d*l+h*c-i*f,e[2]=h*u+d*f+i*l-o*c,e[3]=d*u-i*c-o*l-h*f;var v=t[4],_=t[5],p=t[6],m=t[7];return e[4]=v*u+m*c+_*f-p*l,e[5]=_*u+m*l+p*c-v*f,e[6]=p*u+m*f+v*l-_*c,e[7]=m*u-v*c-_*l-p*f,e}function so(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e}function Dt(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=r[4],f=r[5],u=r[6],i=r[7],o=t[4],h=t[5],d=t[6],v=t[7],_=r[0],p=r[1],m=r[2],y=r[3];return e[0]=n*y+c*_+a*m-s*p,e[1]=a*y+c*p+s*_-n*m,e[2]=s*y+c*m+n*p-a*_,e[3]=c*y-n*_-a*p-s*m,e[4]=n*i+c*l+a*u-s*f+o*y+v*_+h*m-d*p,e[5]=a*i+c*f+s*l-n*u+h*y+v*p+d*_-o*m,e[6]=s*i+c*u+n*f-a*l+d*y+v*m+o*p-h*_,e[7]=c*i-n*l-a*f-s*u+v*y-o*_-h*p-d*m,e}var yo=Dt;P.mul=yo;function oo(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e}var zt=re.dot;P.dot=zt;function co(e,t,r,n){var a=1-n;return zt(t,r)<0&&(n=-n),e[0]=t[0]*a+r[0]*n,e[1]=t[1]*a+r[1]*n,e[2]=t[2]*a+r[2]*n,e[3]=t[3]*a+r[3]*n,e[4]=t[4]*a+r[4]*n,e[5]=t[5]*a+r[5]*n,e[6]=t[6]*a+r[6]*n,e[7]=t[7]*a+r[7]*n,e}function lo(e,t){var r=be(t);return e[0]=-t[0]/r,e[1]=-t[1]/r,e[2]=-t[2]/r,e[3]=t[3]/r,e[4]=-t[4]/r,e[5]=-t[5]/r,e[6]=-t[6]/r,e[7]=t[7]/r,e}function fo(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var Ft=re.length;P.length=Ft;var go=Ft;P.len=go;var be=re.squaredLength;P.squaredLength=be;var Mo=be;P.sqrLen=Mo;function ho(e,t){var r=be(t);if(r>0){r=Math.sqrt(r);var n=t[0]/r,a=t[1]/r,s=t[2]/r,c=t[3]/r,l=t[4],f=t[5],u=t[6],i=t[7],o=n*l+a*f+s*u+c*i;e[0]=n,e[1]=a,e[2]=s,e[3]=c,e[4]=(l-n*o)/r,e[5]=(f-a*o)/r,e[6]=(u-s*o)/r,e[7]=(i-c*o)/r}return e}function uo(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function po(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function vo(e,t){var r=e[0],n=e[1],a=e[2],s=e[3],c=e[4],l=e[5],f=e[6],u=e[7],i=t[0],o=t[1],h=t[2],d=t[3],v=t[4],_=t[5],p=t[6],m=t[7];return Math.abs(r-i)<=V.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=V.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-h)<=V.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-d)<=V.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(c-v)<=V.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(l-_)<=V.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(f-p)<=V.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(u-m)<=V.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))}});var $t=H(T=>{"use strict";function Ae(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ae=function(r){return typeof r}:Ae=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ae(e)}Object.defineProperty(T,"__esModule",{value:!0});T.create=Ht;T.clone=xo;T.fromValues=bo;T.copy=Ao;T.set=wo;T.add=To;T.subtract=Vt;T.multiply=Nt;T.divide=Xt;T.ceil=So;T.floor=Oo;T.min=Ro;T.max=Po;T.round=Lo;T.scale=Io;T.scaleAndAdd=Eo;T.distance=Bt;T.squaredDistance=Gt;T.length=Qt;T.squaredLength=Zt;T.negate=qo;T.inverse=Wo;T.normalize=Co;T.dot=Do;T.cross=ko;T.lerp=jo;T.random=zo;T.transformMat2=Fo;T.transformMat2d=Yo;T.transformMat3=Ho;T.transformMat4=Vo;T.rotate=No;T.angle=Xo;T.zero=Bo;T.str=Go;T.exactEquals=Qo;T.equals=Zo;T.forEach=T.sqrLen=T.sqrDist=T.dist=T.div=T.mul=T.sub=T.len=void 0;var ce=Uo(Z());function Ut(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return Ut=function(){return e},e}function Uo(e){if(e&&e.__esModule)return e;if(e===null||Ae(e)!=="object"&&typeof e!="function")return{default:e};var t=Ut();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function Ht(){var e=new ce.ARRAY_TYPE(2);return ce.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function xo(e){var t=new ce.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t}function bo(e,t){var r=new ce.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r}function Ao(e,t){return e[0]=t[0],e[1]=t[1],e}function wo(e,t,r){return e[0]=t,e[1]=r,e}function To(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function Vt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function Nt(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function Xt(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function So(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Oo(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Ro(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Po(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function Lo(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function Io(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function Eo(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function Bt(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.hypot(r,n)}function Gt(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function Qt(e){var t=e[0],r=e[1];return Math.hypot(t,r)}function Zt(e){var t=e[0],r=e[1];return t*t+r*r}function qo(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Wo(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function Co(e,t){var r=t[0],n=t[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}function Do(e,t){return e[0]*t[0]+e[1]*t[1]}function ko(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function jo(e,t,r,n){var a=t[0],s=t[1];return e[0]=a+n*(r[0]-a),e[1]=s+n*(r[1]-s),e}function zo(e,t){t=t||1;var r=ce.RANDOM()*2*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function Fo(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[2]*a,e[1]=r[1]*n+r[3]*a,e}function Yo(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[2]*a+r[4],e[1]=r[1]*n+r[3]*a+r[5],e}function Ho(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[3]*a+r[6],e[1]=r[1]*n+r[4]*a+r[7],e}function Vo(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[4]*a+r[12],e[1]=r[1]*n+r[5]*a+r[13],e}function No(e,t,r,n){var a=t[0]-r[0],s=t[1]-r[1],c=Math.sin(n),l=Math.cos(n);return e[0]=a*l-s*c+r[0],e[1]=a*c+s*l+r[1],e}function Xo(e,t){var r=e[0],n=e[1],a=t[0],s=t[1],c=Math.sqrt(r*r+n*n)*Math.sqrt(a*a+s*s),l=c&&(r*a+n*s)/c;return Math.acos(Math.min(Math.max(l,-1),1))}function Bo(e){return e[0]=0,e[1]=0,e}function Go(e){return"vec2("+e[0]+", "+e[1]+")"}function Qo(e,t){return e[0]===t[0]&&e[1]===t[1]}function Zo(e,t){var r=e[0],n=e[1],a=t[0],s=t[1];return Math.abs(r-a)<=ce.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=ce.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))}var $o=Qt;T.len=$o;var Jo=Vt;T.sub=Jo;var Ko=Nt;T.mul=Ko;var ec=Xt;T.div=ec;var tc=Bt;T.dist=tc;var rc=Gt;T.sqrDist=rc;var nc=Zt;T.sqrLen=nc;var ic=function(){var e=Ht();return function(t,r,n,a,s,c){var l,f;for(r||(r=2),n||(n=0),a?f=Math.min(a*r+n,t.length):f=t.length,l=n;l<f;l+=r)e[0]=t[l],e[1]=t[l+1],s(e,e,c),t[l]=e[0],t[l+1]=e[1];return t}}();T.forEach=ic});var ne=H(Y=>{"use strict";function we(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?we=function(r){return typeof r}:we=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},we(e)}Object.defineProperty(Y,"__esModule",{value:!0});Y.vec4=Y.vec3=Y.vec2=Y.quat2=Y.quat=Y.mat4=Y.mat3=Y.mat2d=Y.mat2=Y.glMatrix=void 0;var ac=$(Z());Y.glMatrix=ac;var sc=$(Xe());Y.mat2=sc;var oc=$(Ze());Y.mat2d=oc;var cc=$(Re());Y.mat3=cc;var lc=$(Pe());Y.mat4=lc;var fc=$(We());Y.quat=fc;var hc=$(Yt());Y.quat2=hc;var dc=$($t());Y.vec2=dc;var uc=$(Le());Y.vec3=uc;var pc=$(Ie());Y.vec4=pc;function Jt(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return Jt=function(){return e},e}function $(e){if(e&&e.__esModule)return e;if(e===null||we(e)!=="object"&&typeof e!="function")return{default:e};var t=Jt();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}});var Kt=H(()=>{WL.registerComponent("8thwall-camera",{camera:{type:WL.Type.Enum,values:["auto","back","front"],default:"auto"}},{name:"wonderland-engine",init:function(){this.position=[0,0,0,0],this.rotation=[0,0,0,0],this.started=!1;let e=["auto","back","front"];this.camera=e[this.camera],this.camera=="auto"&&(this.camera="back"),this.onStart=this.onStart.bind(this),this.onUpdate=this.onUpdate.bind(this),XR8.addCameraPipelineModules([XR8.GlTextureRenderer.pipelineModule(),XR8.XrController.pipelineModule(),this]),this.camera=="back"?XR8.run({canvas:Module.canvas,ownRunLoop:!1}):this.camera=="back"?(XR8.XrController.configure({disableWorldTracking:!0}),XR8.run({canvas:Module.canvas,ownRunLoop:!1,cameraConfig:{direction:XR8.XrConfig.camera().FRONT}})):console.error("[8thwall-camera] Invalid camera setting:",this.camera)},update:function(){if(this.started){if(WL.scene.onPostRender.length==0&&(WL.scene.onPreRender.push(function(){XR8.runPreRender(Date.now()),_wl_reset_context()}),WL.scene.onPostRender.push(function(){XR8.runPostRender(Date.now())})),this.rotation[0]==0&&this.rotation[1]==0&&this.rotation[2]==0&&this.rotation[3]==0)return;this.object.resetTransform(),this.object.rotate(this.rotation),this.object.translate(this.position)}},onUpdate:function(e){if(!e.processCpuResult.reality)return;let t=e.processCpuResult.reality.rotation;this.rotation[0]=t.x,this.rotation[1]=t.y,this.rotation[2]=t.z,this.rotation[3]=t.w;let r=e.processCpuResult.reality.position;this.position[0]=r.x,this.position[1]=r.y,this.position[2]=r.z},onStart:function(){this.started=!0}})});var er=H(()=>{WL.registerComponent("cursor-target",{},{init:function(){this.hoverFunctions=[],this.unHoverFunctions=[],this.clickFunctions=[]},onHover:function(e,t){for(let r in this.hoverFunctions)this.hoverFunctions[r](e,t)},onUnhover:function(e,t){for(let r in this.unHoverFunctions)this.unHoverFunctions[r](e,t)},onClick:function(e,t){for(let r in this.clickFunctions)this.clickFunctions[r](e,t)},addHoverFunction:function(e){if(typeof e!="function")throw new TypeError(this.object.name+".cursor-target: Argument needs to be a function");this.hoverFunctions.push(e)},removeHoverFunction:function(e){if(typeof e!="function")throw new TypeError(this.object.name+".cursor-target: Argument needs to be a function");this._removeItemOnce(this.hoverFunctions,e)},addUnHoverFunction:function(e){if(typeof e!="function")throw new TypeError(this.object.name+".cursor-target: Argument needs to be a function");this.unHoverFunctions.push(e)},removeUnHoverFunction:function(e){if(typeof e!="function")throw new TypeError(this.object.name+".cursor-target: Argument needs to be a function");this._removeItemOnce(this.unHoverFunctions,e)},addClickFunction:function(e){if(typeof e!="function")throw new TypeError(this.object.name+".cursor-target: Argument needs to be a function");this.clickFunctions.push(e)},removeClickFunction:function(e){if(typeof e!="function")throw new TypeError(this.object.name+".cursor-target: Argument needs to be a function");this._removeItemOnce(this.clickFunctions,e)},_removeItemOnce:function(e,t){var r=e.indexOf(t);return r>-1&&e.splice(r,1),e}})});var vc={};var se,tr=J(()=>{se=K(ne());WL.registerComponent("cursor",{collisionGroup:{type:WL.Type.Int,default:1},cursorRayObject:{type:WL.Type.Object,default:null},cursorRayScalingAxis:{type:WL.Type.Enum,values:["x","y","z","none"],default:"z"},cursorObject:{type:WL.Type.Object,default:null},handedness:{type:WL.Type.Enum,values:["input component","left","right","none"],default:"input component"},rayCastMode:{type:WL.Type.Enum,values:["collision","physx"],default:"collision"}},{init:function(){this.session=null,this.collisionMask=1<<this.collisionGroup,this.maxDistance=100},start:function(){if(this.handedness==0){let e=this.object.getComponent("input");e?(this.handedness=e.handedness,this.input=e):console.warn("cursor component on object",this.object.name,'was configured with handedness "input component", but object has no input component.')}else this.handedness=["left","right"][this.handedness-1];this.globalTarget=this.object.addComponent("cursor-target"),this.origin=new Float32Array(3),this.cursorObjScale=new Float32Array(3),this.direction=[0,0,0],this.tempQuat=new Float32Array(4),this.viewComponent=this.object.getComponent("view"),this.viewComponent!=null&&(WL.canvas.addEventListener("click",this.onClick.bind(this)),WL.canvas.addEventListener("mousemove",this.onMouseMove.bind(this)),this.projectionMatrix=new Float32Array(16),se.mat4.invert(this.projectionMatrix,this.viewComponent.projectionMatrix),WL.canvas.addEventListener("resize",this.onViewportResize.bind(this))),this.isHovering=!1,this.visible=!0,this.cursorPos=new Float32Array(3),this.hoveringObject=null,WL.onXRSessionStart.push(this.setupVREvents.bind(this)),this.cursorRayObject&&(this.cursorRayScale=new Float32Array(3),this.cursorRayScale.set(this.cursorRayObject.scalingLocal),this.object.getTranslationWorld(this.origin),this.object.getForward(this.direction),this._setCursorRayTransform([this.origin[0]+this.direction[0],this.origin[1]+this.direction[1],this.origin[2]+this.direction[2]]))},onViewportResize:function(){!this.viewComponent||se.mat4.invert(this.projectionMatrix,this.viewComponent.projectionMatrix)},onClick:function(e){let t=e.target.getBoundingClientRect(),r=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);if(r.hitCount>0){let n=r.objects[0];this._clickOn(n)}},_clickOn:function(e){let t=e.getComponent("cursor-target",0);t&&t.onClick(e,this),this.globalTarget.onClick(e,this)},_setCursorRayTransform:function(e){if(!this.cursorRayObject)return;let t=se.vec3.dist(this.origin,e);this.cursorRayObject.setTranslationLocal([0,0,-t/2]),this.cursorRayScalingAxis!=4&&(this.cursorRayObject.resetScaling(),this.cursorRayScale[this.cursorRayScalingAxis]=t/2,this.cursorRayObject.scale(this.cursorRayScale))},_setCursorVisibility:function(e){this.visible!=e&&(this.visible=e,!!this.cursorObject&&(e?(this.cursorObject.resetScaling(),this.cursorObject.scale(this.cursorObjScale)):(this.cursorObjScale.set(this.cursorObject.scalingLocal),this.cursorObject.scale([0,0,0]))))},update:function(){if(this.session){if(this.arTouchDown&&this.input&&WL.xrSession.inputSources[0].handedness==="none"&&WL.xrSession.inputSources[0].gamepad){let t=WL.xrSession.inputSources[0].gamepad.axes;this.direction=[t[0],-t[1],-1],this.updateDirection()}else this.object.getTranslationWorld(this.origin),this.object.getForward(this.direction);let e=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(this.origin,this.direction,this.collisionMask):WL.physics.rayCast(this.origin,this.direction,this.collisionMask,this.maxDistance);e.hitCount>0?this.cursorPos.set(e.locations[0]):this.cursorPos.fill(0),this.hoverBehaviour(e)}this.cursorObject&&(this.hoveringObject&&(this.cursorPos[0]!=0||this.cursorPos[1]!=0||this.cursorPos[2]!=0)?(this._setCursorVisibility(!0),this.cursorObject.setTranslationWorld(this.cursorPos),this._setCursorRayTransform(this.cursorPos)):this._setCursorVisibility(!1))},hoverBehaviour:function(e){if(e.hitCount>0){if(!this.hoveringObject||!this.hoveringObject.equals(e.objects[0])){if(this.hoveringObject){let r=this.hoveringObject.getComponent("cursor-target");r&&r.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this)}this.hoveringObject=e.objects[0],WL.canvas.style.cursor="pointer";let t=this.hoveringObject.getComponent("cursor-target");t&&t.onHover(this.hoveringObject,this),this.globalTarget.onHover(this.hoveringObject,this)}}else if(this.hoveringObject&&e.hitCount==0){let t=this.hoveringObject.getComponent("cursor-target");t&&t.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this),this.hoveringObject=null}},setupVREvents:function(e){this.session=e,e.addEventListener("end",function(t){this.session=null}.bind(this)),e.addEventListener("select",function(t){t.inputSource.handedness==this.handedness&&this.hoveringObject&&this._clickOn(this.hoveringObject)}.bind(this)),e.addEventListener("selectstart",this.onTouchStart.bind(this)),e.addEventListener("selectend",this.onTouchEnd.bind(this))},onTouchStart:function(e){this.arTouchDown=!0,this.onViewportResize()},onTouchEnd:function(e){this.arTouchDown=!1},onMouseMove:function(e){let t=e.target.getBoundingClientRect(),r=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.hoverBehaviour(r)},updateMousePos:function(e,t,r,n){let a=e/r,s=t/n;return this.direction=[a*2-1,-s*2+1,-1],this.updateDirection()},updateDirection:function(){this.object.getTranslationWorld(this.origin),se.vec3.transformMat4(this.direction,this.direction,this.projectionMatrix),se.vec3.normalize(this.direction,this.direction),se.vec3.transformQuat(this.direction,this.direction,this.object.transformWorld);let e=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(this.origin,this.direction,this.collisionMask):WL.physics.rayCast(this.origin,this.direction,this.collisionMask,this.maxDistance);return e.hitCount>0?this.cursorPos.set(e.locations[0]):this.cursorPos.fill(0),e},onDeactivate:function(){if(this._setCursorVisibility(!1),this.hoveringObject){let e=this.hoveringObject.getComponent("cursor-target");e&&e.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this)}this.cursorRayObject&&this.cursorRayObject.scale([0,0,0])},onActivate:function(){this._setCursorVisibility(!0)}})});var rr=H(()=>{WL.registerComponent("debug-object",{obj:{type:WL.Type.Object}},{start:function(){},init:function(){let e=[0,0,0];glMatrix.quat2.getTranslation(e,this.object.transformWorld),console.log("Debug Object:",this.object.name),console.log("Other object:",this.obj.name),console.log("	translation",e),console.log("	transformWorld",this.object.transformWorld),console.log("	transformLocal",this.object.transformLocal)},update:function(){}})});var nr=H(()=>{function _c(e,t,r,n){let a=Math.cos(t/2),s=Math.cos(r/2),c=Math.cos(n/2),l=Math.sin(t/2),f=Math.sin(r/2),u=Math.sin(n/2);e[0]=l*s*c+a*f*u,e[1]=a*f*c-l*s*u,e[2]=a*s*u-l*f*c,e[3]=a*s*c+l*f*u}WL.registerComponent("device-orientation-look",{},{start:function(){this.rotationX=0,this.rotationY=0,this.lastClientX=-1,this.lastClientY=-1},init:function(){this.deviceOrientation=[0,0,0,1],this.screenOrientation=0,this._origin=[0,0,0],window.addEventListener("deviceorientation",function(e){let t=e.alpha||0,r=e.beta||0,n=e.gamma||0,a=Math.PI/180;_c(this.deviceOrientation,r*a,t*a,-n*a)}.bind(this)),window.addEventListener("orientationchange",function(e){this.screenOrientation=window.orientation||0}.bind(this),!1)},update:function(){Module.webxr_session==null&&(glMatrix.quat2.getTranslation(this._origin,this.object.transformLocal),this.object.resetTransform(),this.screenOrientation!=0&&this.object.rotateAxisAngleDeg([0,0,1],this.screenOrientation),this.object.rotate([-Math.sqrt(.5),0,0,Math.sqrt(.5)]),this.object.rotate(this.deviceOrientation),this.object.translate(this._origin))}})});var ir=H(()=>{WL.registerComponent("finger-cursor",{},{init:function(){this.lastTarget=null},start:function(){this.tip=this.object.getComponent("collision")},update:function(){let e=this.tip.queryOverlaps(),t=null;for(let r=0;r<e.length;++r){let n=e[r].object,a=n.getComponent("cursor-target");if(a){a.equals(this.lastTarget)||(a.onHover(n,this),a.onClick(n,this)),t=a;break}}if(t)this.lastTarget=t;else{this.lastTarget&&this.lastTarget.onUnhover(this.lastTarget.object,this),this.lastTarget=null;return}}})});var mc={};var le,ar=J(()=>{le=K(ne());WL.registerComponent("hand-tracking",{handedness:{type:WL.Type.Enum,default:"left",values:["left","right"]},jointMesh:{type:WL.Type.Mesh,default:null},jointMaterial:{type:WL.Type.Material,default:null},handSkin:{type:WL.Type.Skin,default:null},deactivateChildrenWithoutPose:{type:WL.Type.Bool,default:!0},controllerToDeactivate:{type:WL.Type.Object}},{ORDERED_JOINTS:["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],init:function(){this.handedness=["left","right"][this.handedness]},start:function(){if(this.joints=[],this.session=null,this.refSpace=null,this.hasPose=!1,this._childrenActive=!0,!("XRHand"in window)){console.warn("WebXR Hand Tracking not supported by this browser."),this.active=!1;return}if(this.handSkin){let t=this.handSkin.jointIds;this.joints[this.ORDERED_JOINTS[0]]=new WL.Object(t[0]);for(let r=0;r<t.length;++r){let n=new WL.Object(t[r]);this.joints[n.name]=n}return}for(let e=0;e<=this.ORDERED_JOINTS.length;++e){let t=WL.scene.addObject(this.object.parent),r=t.addComponent("mesh");r.mesh=this.jointMesh,r.material=this.jointMaterial,this.joints[this.ORDERED_JOINTS[e]]=t}},update:function(e){if(this.session||WL.xrSession&&this.setupVREvents(WL.xrSession),!!this.session){if(this.hasPose=!1,this.session&&this.session.inputSources&&this.refSpace)for(let t=0;t<=this.session.inputSources.length;++t){let r=this.session.inputSources[t];if(!r||!r.hand||r.handedness!=this.handedness)continue;if(this.hasPose=!0,r.hand.get("wrist")!==null){let s=Module.webxr_frame.getJointPose(r.hand.get("wrist"),this.refSpace);s&&(this.object.resetTranslationRotation(),this.object.transformLocal.set([s.transform.orientation.x,s.transform.orientation.y,s.transform.orientation.z,s.transform.orientation.w]),this.object.translate([s.transform.position.x,s.transform.position.y,s.transform.position.z]))}let n=new Float32Array(3),a=new Float32Array(4);le.quat.invert(a,this.object.transformLocal),this.object.getTranslationLocal(n);for(let s=0;s<this.ORDERED_JOINTS.length;++s){let c=this.ORDERED_JOINTS[s],l=this.joints[c];if(l==null)continue;let f=null;if(r.hand.get(c)!==null&&(f=Module.webxr_frame.getJointPose(r.hand.get(c),this.refSpace)),f!==null)if(this.handSkin)l.resetTranslationRotation(),l.translate([f.transform.position.x-n[0],f.transform.position.y-n[1],f.transform.position.z-n[2]]),l.rotate(a),l.rotateObject([f.transform.orientation.x,f.transform.orientation.y,f.transform.orientation.z,f.transform.orientation.w]);else{l.resetTransform(),l.transformLocal.set([f.transform.orientation.x,f.transform.orientation.y,f.transform.orientation.z,f.transform.orientation.w]),l.translate([f.transform.position.x,f.transform.position.y,f.transform.position.z]);let u=f.radius||.007;l.scale([u,u,u])}else this.handSkin||l.scale([0,0,0])}}!this.hasPose&&this._childrenActive?(this._childrenActive=!1,this.deactivateChildrenWithoutPose&&this.setChildrenActive(!1),this.controllerToDeactivate&&(this.controllerToDeactivate.active=!0,this.setChildrenActive(!0,this.controllerToDeactivate))):this.hasPose&&!this._childrenInactive&&(this._childrenActive=!0,this.deactivateChildrenWithoutPose&&this.setChildrenActive(!0),this.controllerToDeactivate&&(this.controllerToDeactivate.active=!1,this.setChildrenActive(!1,this.controllerToDeactivate)))}},setChildrenActive:function(e,t){t=t||this.object;let r=t.children;for(let n of r)n.active=e,this.setChildrenActive(e,n)},isGrabbing:function(){let e=[0,0,0];le.quat2.getTranslation(e,this.joints["index-finger-tip"].transformLocal);let t=[0,0,0];return le.quat2.getTranslation(t,this.joints["thumb-tip"].transformLocal),le.vec3.sqrDist(t,e)<.001},setupVREvents:function(e){e.requestReferenceSpace("local").then(function(t){this.refSpace=t}.bind(this)),this.session=e}})});var yc={};var sr,or=J(()=>{sr=K(ne());WL.registerComponent("hit-test-location",{},{init:function(){WL.onXRSessionStart.push(this.xrSessionStart.bind(this)),WL.onXRSessionStart.push(this.xrSessionEnd.bind(this)),this.tempScaling=new Float32Array(3),this.tempScaling.set(this.object.scalingLocal),this.visible=!1,this.object.scale([0,0,0])},update:function(e){let t=this.visible;if(this.xrHitTestSource){let r=Module.webxr_frame;if(!r)return;let n=r.getHitTestResults(this.xrHitTestSource);if(n.length>0){let a=n[0].getPose(this.xrViewerSpace);this.visible=!0,sr.quat2.fromMat4(this.object.transformLocal,a.transform.matrix),this.object.setDirty()}else this.visible=!1}this.visible!=t&&(this.visible?(this.object.scalingLocal.set(this.tempScaling),this.object.setDirty()):(this.tempScaling.set(this.object.scalingLocal),this.object.scale([0,0,0])))},xrSessionStart:function(e){e.requestReferenceSpace("viewer").then(function(t){this.xrViewerSpace=t,e.requestHitTestSource({space:this.xrViewerSpace}).then(function(r){this.xrHitTestSource=r}.bind(this)).catch(console.error)}.bind(this)).catch(console.error)},xrSessionEnd:function(){!this.xrHitTestSource||(this.xrHitTestSource.cancel(),this.xrHitTestSource=null)}})});var De=H(Te=>{(function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var i=this||t;return i._counter=1e3,i._html5AudioPool=[],i.html5PoolSize=10,i._codecs={},i._howls=[],i._muted=!1,i._volume=1,i._canPlayEvent="canplaythrough",i._navigator=typeof window!="undefined"&&window.navigator?window.navigator:null,i.masterGain=null,i.noAudio=!1,i.usingWebAudio=!0,i.autoSuspend=!0,i.ctx=null,i.autoUnlock=!0,i._setup(),i},volume:function(i){var o=this||t;if(i=parseFloat(i),o.ctx||u(),typeof i!="undefined"&&i>=0&&i<=1){if(o._volume=i,o._muted)return o;o.usingWebAudio&&o.masterGain.gain.setValueAtTime(i,t.ctx.currentTime);for(var h=0;h<o._howls.length;h++)if(!o._howls[h]._webAudio)for(var d=o._howls[h]._getSoundIds(),v=0;v<d.length;v++){var _=o._howls[h]._soundById(d[v]);_&&_._node&&(_._node.volume=_._volume*i)}return o}return o._volume},mute:function(i){var o=this||t;o.ctx||u(),o._muted=i,o.usingWebAudio&&o.masterGain.gain.setValueAtTime(i?0:o._volume,t.ctx.currentTime);for(var h=0;h<o._howls.length;h++)if(!o._howls[h]._webAudio)for(var d=o._howls[h]._getSoundIds(),v=0;v<d.length;v++){var _=o._howls[h]._soundById(d[v]);_&&_._node&&(_._node.muted=i?!0:_._muted)}return o},stop:function(){for(var i=this||t,o=0;o<i._howls.length;o++)i._howls[o].stop();return i},unload:function(){for(var i=this||t,o=i._howls.length-1;o>=0;o--)i._howls[o].unload();return i.usingWebAudio&&i.ctx&&typeof i.ctx.close!="undefined"&&(i.ctx.close(),i.ctx=null,u()),i},codecs:function(i){return(this||t)._codecs[i.replace(/^x-/,"")]},_setup:function(){var i=this||t;if(i.state=i.ctx&&i.ctx.state||"suspended",i._autoSuspend(),!i.usingWebAudio)if(typeof Audio!="undefined")try{var o=new Audio;typeof o.oncanplaythrough=="undefined"&&(i._canPlayEvent="canplay")}catch(h){i.noAudio=!0}else i.noAudio=!0;try{var o=new Audio;o.muted&&(i.noAudio=!0)}catch(h){}return i.noAudio||i._setupCodecs(),i},_setupCodecs:function(){var i=this||t,o=null;try{o=typeof Audio!="undefined"?new Audio:null}catch(_){return i}if(!o||typeof o.canPlayType!="function")return i;var h=o.canPlayType("audio/mpeg;").replace(/^no$/,""),d=i._navigator&&i._navigator.userAgent.match(/OPR\/([0-6].)/g),v=d&&parseInt(d[0].split("/")[1],10)<33;return i._codecs={mp3:!!(!v&&(h||o.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!h,opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(o.canPlayType('audio/wav; codecs="1"')||o.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!o.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(o.canPlayType("audio/x-m4b;")||o.canPlayType("audio/m4b;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(o.canPlayType("audio/x-flac;")||o.canPlayType("audio/flac;")).replace(/^no$/,"")},i},_unlockAudio:function(){var i=this||t;if(!(i._audioUnlocked||!i.ctx)){i._audioUnlocked=!1,i.autoUnlock=!1,!i._mobileUnloaded&&i.ctx.sampleRate!==44100&&(i._mobileUnloaded=!0,i.unload()),i._scratchBuffer=i.ctx.createBuffer(1,1,22050);var o=function(h){for(;i._html5AudioPool.length<i.html5PoolSize;)try{var d=new Audio;d._unlocked=!0,i._releaseHtml5Audio(d)}catch(g){i.noAudio=!0;break}for(var v=0;v<i._howls.length;v++)if(!i._howls[v]._webAudio)for(var _=i._howls[v]._getSoundIds(),p=0;p<_.length;p++){var m=i._howls[v]._soundById(_[p]);m&&m._node&&!m._node._unlocked&&(m._node._unlocked=!0,m._node.load())}i._autoResume();var y=i.ctx.createBufferSource();y.buffer=i._scratchBuffer,y.connect(i.ctx.destination),typeof y.start=="undefined"?y.noteOn(0):y.start(0),typeof i.ctx.resume=="function"&&i.ctx.resume(),y.onended=function(){y.disconnect(0),i._audioUnlocked=!0,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0),document.removeEventListener("click",o,!0);for(var g=0;g<i._howls.length;g++)i._howls[g]._emit("unlock")}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),document.addEventListener("click",o,!0),i}},_obtainHtml5Audio:function(){var i=this||t;if(i._html5AudioPool.length)return i._html5AudioPool.pop();var o=new Audio().play();return o&&typeof Promise!="undefined"&&(o instanceof Promise||typeof o.then=="function")&&o.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(i){var o=this||t;return i._unlocked&&o._html5AudioPool.push(i),o},_autoSuspend:function(){var i=this;if(!(!i.autoSuspend||!i.ctx||typeof i.ctx.suspend=="undefined"||!t.usingWebAudio)){for(var o=0;o<i._howls.length;o++)if(i._howls[o]._webAudio){for(var h=0;h<i._howls[o]._sounds.length;h++)if(!i._howls[o]._sounds[h]._paused)return i}return i._suspendTimer&&clearTimeout(i._suspendTimer),i._suspendTimer=setTimeout(function(){if(!!i.autoSuspend){i._suspendTimer=null,i.state="suspending";var d=function(){i.state="suspended",i._resumeAfterSuspend&&(delete i._resumeAfterSuspend,i._autoResume())};i.ctx.suspend().then(d,d)}},3e4),i}},_autoResume:function(){var i=this;if(!(!i.ctx||typeof i.ctx.resume=="undefined"||!t.usingWebAudio))return i.state==="running"&&i.ctx.state!=="interrupted"&&i._suspendTimer?(clearTimeout(i._suspendTimer),i._suspendTimer=null):i.state==="suspended"||i.state==="running"&&i.ctx.state==="interrupted"?(i.ctx.resume().then(function(){i.state="running";for(var o=0;o<i._howls.length;o++)i._howls[o]._emit("resume")}),i._suspendTimer&&(clearTimeout(i._suspendTimer),i._suspendTimer=null)):i.state==="suspending"&&(i._resumeAfterSuspend=!0),i}};var t=new e,r=function(i){var o=this;if(!i.src||i.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}o.init(i)};r.prototype={init:function(i){var o=this;return t.ctx||u(),o._autoplay=i.autoplay||!1,o._format=typeof i.format!="string"?i.format:[i.format],o._html5=i.html5||!1,o._muted=i.mute||!1,o._loop=i.loop||!1,o._pool=i.pool||5,o._preload=typeof i.preload=="boolean"||i.preload==="metadata"?i.preload:!0,o._rate=i.rate||1,o._sprite=i.sprite||{},o._src=typeof i.src!="string"?i.src:[i.src],o._volume=i.volume!==void 0?i.volume:1,o._xhr={method:i.xhr&&i.xhr.method?i.xhr.method:"GET",headers:i.xhr&&i.xhr.headers?i.xhr.headers:null,withCredentials:i.xhr&&i.xhr.withCredentials?i.xhr.withCredentials:!1},o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._playLock=!1,o._onend=i.onend?[{fn:i.onend}]:[],o._onfade=i.onfade?[{fn:i.onfade}]:[],o._onload=i.onload?[{fn:i.onload}]:[],o._onloaderror=i.onloaderror?[{fn:i.onloaderror}]:[],o._onplayerror=i.onplayerror?[{fn:i.onplayerror}]:[],o._onpause=i.onpause?[{fn:i.onpause}]:[],o._onplay=i.onplay?[{fn:i.onplay}]:[],o._onstop=i.onstop?[{fn:i.onstop}]:[],o._onmute=i.onmute?[{fn:i.onmute}]:[],o._onvolume=i.onvolume?[{fn:i.onvolume}]:[],o._onrate=i.onrate?[{fn:i.onrate}]:[],o._onseek=i.onseek?[{fn:i.onseek}]:[],o._onunlock=i.onunlock?[{fn:i.onunlock}]:[],o._onresume=[],o._webAudio=t.usingWebAudio&&!o._html5,typeof t.ctx!="undefined"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(o),o._autoplay&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o._preload!=="none"&&o.load(),o},load:function(){var i=this,o=null;if(t.noAudio){i._emit("loaderror",null,"No audio support.");return}typeof i._src=="string"&&(i._src=[i._src]);for(var h=0;h<i._src.length;h++){var d,v;if(i._format&&i._format[h])d=i._format[h];else{if(v=i._src[h],typeof v!="string"){i._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}d=/^data:audio\/([^;,]+);/i.exec(v),d||(d=/\.([^.]+)$/.exec(v.split("?",1)[0])),d&&(d=d[1].toLowerCase())}if(d||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),d&&t.codecs(d)){o=i._src[h];break}}if(!o){i._emit("loaderror",null,"No codec support for selected audio sources.");return}return i._src=o,i._state="loading",window.location.protocol==="https:"&&o.slice(0,5)==="http:"&&(i._html5=!0,i._webAudio=!1),new n(i),i._webAudio&&s(i),i},play:function(i,o){var h=this,d=null;if(typeof i=="number")d=i,i=null;else{if(typeof i=="string"&&h._state==="loaded"&&!h._sprite[i])return null;if(typeof i=="undefined"&&(i="__default",!h._playLock)){for(var v=0,_=0;_<h._sounds.length;_++)h._sounds[_]._paused&&!h._sounds[_]._ended&&(v++,d=h._sounds[_]._id);v===1?i=null:d=null}}var p=d?h._soundById(d):h._inactiveSound();if(!p)return null;if(d&&!i&&(i=p._sprite||"__default"),h._state!=="loaded"){p._sprite=i,p._ended=!1;var m=p._id;return h._queue.push({event:"play",action:function(){h.play(m)}}),m}if(d&&!p._paused)return o||h._loadQueue("play"),p._id;h._webAudio&&t._autoResume();var y=Math.max(0,p._seek>0?p._seek:h._sprite[i][0]/1e3),g=Math.max(0,(h._sprite[i][0]+h._sprite[i][1])/1e3-y),M=g*1e3/Math.abs(p._rate),A=h._sprite[i][0]/1e3,w=(h._sprite[i][0]+h._sprite[i][1])/1e3;p._sprite=i,p._ended=!1;var D=function(){p._paused=!1,p._seek=y,p._start=A,p._stop=w,p._loop=!!(p._loop||h._sprite[i][2])};if(y>=w){h._ended(p);return}var R=p._node;if(h._webAudio){var k=function(){h._playLock=!1,D(),h._refreshBuffer(p);var q=p._muted||h._muted?0:p._volume;R.gain.setValueAtTime(q,t.ctx.currentTime),p._playStart=t.ctx.currentTime,typeof R.bufferSource.start=="undefined"?p._loop?R.bufferSource.noteGrainOn(0,y,86400):R.bufferSource.noteGrainOn(0,y,g):p._loop?R.bufferSource.start(0,y,86400):R.bufferSource.start(0,y,g),M!==Infinity&&(h._endTimers[p._id]=setTimeout(h._ended.bind(h,p),M)),o||setTimeout(function(){h._emit("play",p._id),h._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?k():(h._playLock=!0,h.once("resume",k),h._clearTimer(p._id))}else{var E=function(){R.currentTime=y,R.muted=p._muted||h._muted||t._muted||R.muted,R.volume=p._volume*t.volume(),R.playbackRate=p._rate;try{var q=R.play();if(q&&typeof Promise!="undefined"&&(q instanceof Promise||typeof q.then=="function")?(h._playLock=!0,D(),q.then(function(){h._playLock=!1,R._unlocked=!0,o||(h._emit("play",p._id),h._loadQueue())}).catch(function(){h._playLock=!1,h._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):o||(h._playLock=!1,D(),h._emit("play",p._id),h._loadQueue()),R.playbackRate=p._rate,R.paused){h._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}i!=="__default"||p._loop?h._endTimers[p._id]=setTimeout(h._ended.bind(h,p),M):(h._endTimers[p._id]=function(){h._ended(p),R.removeEventListener("ended",h._endTimers[p._id],!1)},R.addEventListener("ended",h._endTimers[p._id],!1))}catch(L){h._emit("playerror",p._id,L)}};R.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(R.src=h._src,R.load());var F=window&&window.ejecta||!R.readyState&&t._navigator.isCocoonJS;if(R.readyState>=3||F)E();else{h._playLock=!0;var j=function(){E(),R.removeEventListener(t._canPlayEvent,j,!1)};R.addEventListener(t._canPlayEvent,j,!1),h._clearTimer(p._id)}}return p._id},pause:function(i){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"pause",action:function(){o.pause(i)}}),o;for(var h=o._getSoundIds(i),d=0;d<h.length;d++){o._clearTimer(h[d]);var v=o._soundById(h[d]);if(v&&!v._paused&&(v._seek=o.seek(h[d]),v._rateSeek=0,v._paused=!0,o._stopFade(h[d]),v._node))if(o._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop=="undefined"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),o._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===Infinity)&&v._node.pause();arguments[1]||o._emit("pause",v?v._id:null)}return o},stop:function(i,o){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"stop",action:function(){h.stop(i)}}),h;for(var d=h._getSoundIds(i),v=0;v<d.length;v++){h._clearTimer(d[v]);var _=h._soundById(d[v]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,h._stopFade(d[v]),_._node&&(h._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop=="undefined"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),h._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===Infinity)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===Infinity&&h._clearSound(_._node))),o||h._emit("stop",_._id))}return h},mute:function(i,o){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"mute",action:function(){h.mute(i,o)}}),h;if(typeof o=="undefined")if(typeof i=="boolean")h._muted=i;else return h._muted;for(var d=h._getSoundIds(o),v=0;v<d.length;v++){var _=h._soundById(d[v]);_&&(_._muted=i,_._interval&&h._stopFade(_._id),h._webAudio&&_._node?_._node.gain.setValueAtTime(i?0:_._volume,t.ctx.currentTime):_._node&&(_._node.muted=t._muted?!0:i),h._emit("mute",_._id))}return h},volume:function(){var i=this,o=arguments,h,d;if(o.length===0)return i._volume;if(o.length===1||o.length===2&&typeof o[1]=="undefined"){var v=i._getSoundIds(),_=v.indexOf(o[0]);_>=0?d=parseInt(o[0],10):h=parseFloat(o[0])}else o.length>=2&&(h=parseFloat(o[0]),d=parseInt(o[1],10));var p;if(typeof h!="undefined"&&h>=0&&h<=1){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,o)}}),i;typeof d=="undefined"&&(i._volume=h),d=i._getSoundIds(d);for(var m=0;m<d.length;m++)p=i._soundById(d[m]),p&&(p._volume=h,o[2]||i._stopFade(d[m]),i._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(h,t.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=h*t.volume()),i._emit("volume",p._id))}else return p=d?i._soundById(d):i._sounds[0],p?p._volume:0;return i},fade:function(i,o,h,d){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(i,o,h,d)}}),v;i=Math.min(Math.max(0,parseFloat(i)),1),o=Math.min(Math.max(0,parseFloat(o)),1),h=parseFloat(h),v.volume(i,d);for(var _=v._getSoundIds(d),p=0;p<_.length;p++){var m=v._soundById(_[p]);if(m){if(d||v._stopFade(_[p]),v._webAudio&&!m._muted){var y=t.ctx.currentTime,g=y+h/1e3;m._volume=i,m._node.gain.setValueAtTime(i,y),m._node.gain.linearRampToValueAtTime(o,g)}v._startFadeInterval(m,i,o,h,_[p],typeof d=="undefined")}}return v},_startFadeInterval:function(i,o,h,d,v,_){var p=this,m=o,y=h-o,g=Math.abs(y/.01),M=Math.max(4,g>0?d/g:d),A=Date.now();i._fadeTo=h,i._interval=setInterval(function(){var w=(Date.now()-A)/d;A=Date.now(),m+=y*w,m=Math.round(m*100)/100,y<0?m=Math.max(h,m):m=Math.min(h,m),p._webAudio?i._volume=m:p.volume(m,i._id,!0),_&&(p._volume=m),(h<o&&m<=h||h>o&&m>=h)&&(clearInterval(i._interval),i._interval=null,i._fadeTo=null,p.volume(h,i._id),p._emit("fade",i._id))},M)},_stopFade:function(i){var o=this,h=o._soundById(i);return h&&h._interval&&(o._webAudio&&h._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(h._interval),h._interval=null,o.volume(h._fadeTo,i),h._fadeTo=null,o._emit("fade",i)),o},loop:function(){var i=this,o=arguments,h,d,v;if(o.length===0)return i._loop;if(o.length===1)if(typeof o[0]=="boolean")h=o[0],i._loop=h;else return v=i._soundById(parseInt(o[0],10)),v?v._loop:!1;else o.length===2&&(h=o[0],d=parseInt(o[1],10));for(var _=i._getSoundIds(d),p=0;p<_.length;p++)v=i._soundById(_[p]),v&&(v._loop=h,i._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=h,h&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop)));return i},rate:function(){var i=this,o=arguments,h,d;if(o.length===0)d=i._sounds[0]._id;else if(o.length===1){var v=i._getSoundIds(),_=v.indexOf(o[0]);_>=0?d=parseInt(o[0],10):h=parseFloat(o[0])}else o.length===2&&(h=parseFloat(o[0]),d=parseInt(o[1],10));var p;if(typeof h=="number"){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,o)}}),i;typeof d=="undefined"&&(i._rate=h),d=i._getSoundIds(d);for(var m=0;m<d.length;m++)if(p=i._soundById(d[m]),p){i.playing(d[m])&&(p._rateSeek=i.seek(d[m]),p._playStart=i._webAudio?t.ctx.currentTime:p._playStart),p._rate=h,i._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(h,t.ctx.currentTime):p._node&&(p._node.playbackRate=h);var y=i.seek(d[m]),g=(i._sprite[p._sprite][0]+i._sprite[p._sprite][1])/1e3-y,M=g*1e3/Math.abs(p._rate);(i._endTimers[d[m]]||!p._paused)&&(i._clearTimer(d[m]),i._endTimers[d[m]]=setTimeout(i._ended.bind(i,p),M)),i._emit("rate",p._id)}}else return p=i._soundById(d),p?p._rate:i._rate;return i},seek:function(){var i=this,o=arguments,h,d;if(o.length===0)d=i._sounds[0]._id;else if(o.length===1){var v=i._getSoundIds(),_=v.indexOf(o[0]);_>=0?d=parseInt(o[0],10):i._sounds.length&&(d=i._sounds[0]._id,h=parseFloat(o[0]))}else o.length===2&&(h=parseFloat(o[0]),d=parseInt(o[1],10));if(typeof d=="undefined")return i;if(typeof h=="number"&&(i._state!=="loaded"||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,o)}}),i;var p=i._soundById(d);if(p)if(typeof h=="number"&&h>=0){var m=i.playing(d);m&&i.pause(d,!0),p._seek=h,p._ended=!1,i._clearTimer(d),!i._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=h);var y=function(){i._emit("seek",d),m&&i.play(d,!0)};if(m&&!i._webAudio){var g=function(){i._playLock?setTimeout(g,0):y()};setTimeout(g,0)}else y()}else if(i._webAudio){var M=i.playing(d)?t.ctx.currentTime-p._playStart:0,A=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(A+M*Math.abs(p._rate))}else return p._node.currentTime;return i},playing:function(i){var o=this;if(typeof i=="number"){var h=o._soundById(i);return h?!h._paused:!1}for(var d=0;d<o._sounds.length;d++)if(!o._sounds[d]._paused)return!0;return!1},duration:function(i){var o=this,h=o._duration,d=o._soundById(i);return d&&(h=o._sprite[d._sprite][1]/1e3),h},state:function(){return this._state},unload:function(){for(var i=this,o=i._sounds,h=0;h<o.length;h++)o[h]._paused||i.stop(o[h]._id),i._webAudio||(i._clearSound(o[h]._node),o[h]._node.removeEventListener("error",o[h]._errorFn,!1),o[h]._node.removeEventListener(t._canPlayEvent,o[h]._loadFn,!1),o[h]._node.removeEventListener("ended",o[h]._endFn,!1),t._releaseHtml5Audio(o[h]._node)),delete o[h]._node,i._clearTimer(o[h]._id);var d=t._howls.indexOf(i);d>=0&&t._howls.splice(d,1);var v=!0;for(h=0;h<t._howls.length;h++)if(t._howls[h]._src===i._src||i._src.indexOf(t._howls[h]._src)>=0){v=!1;break}return a&&v&&delete a[i._src],t.noAudio=!1,i._state="unloaded",i._sounds=[],i=null,null},on:function(i,o,h,d){var v=this,_=v["_on"+i];return typeof o=="function"&&_.push(d?{id:h,fn:o,once:d}:{id:h,fn:o}),v},off:function(i,o,h){var d=this,v=d["_on"+i],_=0;if(typeof o=="number"&&(h=o,o=null),o||h)for(_=0;_<v.length;_++){var p=h===v[_].id;if(o===v[_].fn&&p||!o&&p){v.splice(_,1);break}}else if(i)d["_on"+i]=[];else{var m=Object.keys(d);for(_=0;_<m.length;_++)m[_].indexOf("_on")===0&&Array.isArray(d[m[_]])&&(d[m[_]]=[])}return d},once:function(i,o,h){var d=this;return d.on(i,o,h,1),d},_emit:function(i,o,h){for(var d=this,v=d["_on"+i],_=v.length-1;_>=0;_--)(!v[_].id||v[_].id===o||i==="load")&&(setTimeout(function(p){p.call(this,o,h)}.bind(d,v[_].fn),0),v[_].once&&d.off(i,v[_].fn,v[_].id));return d._loadQueue(i),d},_loadQueue:function(i){var o=this;if(o._queue.length>0){var h=o._queue[0];h.event===i&&(o._queue.shift(),o._loadQueue()),i||h.action()}return o},_ended:function(i){var o=this,h=i._sprite;if(!o._webAudio&&i._node&&!i._node.paused&&!i._node.ended&&i._node.currentTime<i._stop)return setTimeout(o._ended.bind(o,i),100),o;var d=!!(i._loop||o._sprite[h][2]);if(o._emit("end",i._id),!o._webAudio&&d&&o.stop(i._id,!0).play(i._id),o._webAudio&&d){o._emit("play",i._id),i._seek=i._start||0,i._rateSeek=0,i._playStart=t.ctx.currentTime;var v=(i._stop-i._start)*1e3/Math.abs(i._rate);o._endTimers[i._id]=setTimeout(o._ended.bind(o,i),v)}return o._webAudio&&!d&&(i._paused=!0,i._ended=!0,i._seek=i._start||0,i._rateSeek=0,o._clearTimer(i._id),o._cleanBuffer(i._node),t._autoSuspend()),!o._webAudio&&!d&&o.stop(i._id,!0),o},_clearTimer:function(i){var o=this;if(o._endTimers[i]){if(typeof o._endTimers[i]!="function")clearTimeout(o._endTimers[i]);else{var h=o._soundById(i);h&&h._node&&h._node.removeEventListener("ended",o._endTimers[i],!1)}delete o._endTimers[i]}return o},_soundById:function(i){for(var o=this,h=0;h<o._sounds.length;h++)if(i===o._sounds[h]._id)return o._sounds[h];return null},_inactiveSound:function(){var i=this;i._drain();for(var o=0;o<i._sounds.length;o++)if(i._sounds[o]._ended)return i._sounds[o].reset();return new n(i)},_drain:function(){var i=this,o=i._pool,h=0,d=0;if(!(i._sounds.length<o)){for(d=0;d<i._sounds.length;d++)i._sounds[d]._ended&&h++;for(d=i._sounds.length-1;d>=0;d--){if(h<=o)return;i._sounds[d]._ended&&(i._webAudio&&i._sounds[d]._node&&i._sounds[d]._node.disconnect(0),i._sounds.splice(d,1),h--)}}},_getSoundIds:function(i){var o=this;if(typeof i=="undefined"){for(var h=[],d=0;d<o._sounds.length;d++)h.push(o._sounds[d]._id);return h}else return[i]},_refreshBuffer:function(i){var o=this;return i._node.bufferSource=t.ctx.createBufferSource(),i._node.bufferSource.buffer=a[o._src],i._panner?i._node.bufferSource.connect(i._panner):i._node.bufferSource.connect(i._node),i._node.bufferSource.loop=i._loop,i._loop&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop||0),i._node.bufferSource.playbackRate.setValueAtTime(i._rate,t.ctx.currentTime),o},_cleanBuffer:function(i){var o=this,h=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&i.bufferSource&&(i.bufferSource.onended=null,i.bufferSource.disconnect(0),h))try{i.bufferSource.buffer=t._scratchBuffer}catch(d){}return i.bufferSource=null,o},_clearSound:function(i){var o=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);o||(i.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(i){this._parent=i,this.init()};n.prototype={init:function(){var i=this,o=i._parent;return i._muted=o._muted,i._loop=o._loop,i._volume=o._volume,i._rate=o._rate,i._seek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,o._sounds.push(i),i.create(),i},create:function(){var i=this,o=i._parent,h=t._muted||i._muted||i._parent._muted?0:i._volume;return o._webAudio?(i._node=typeof t.ctx.createGain=="undefined"?t.ctx.createGainNode():t.ctx.createGain(),i._node.gain.setValueAtTime(h,t.ctx.currentTime),i._node.paused=!0,i._node.connect(t.masterGain)):t.noAudio||(i._node=t._obtainHtml5Audio(),i._errorFn=i._errorListener.bind(i),i._node.addEventListener("error",i._errorFn,!1),i._loadFn=i._loadListener.bind(i),i._node.addEventListener(t._canPlayEvent,i._loadFn,!1),i._endFn=i._endListener.bind(i),i._node.addEventListener("ended",i._endFn,!1),i._node.src=o._src,i._node.preload=o._preload===!0?"auto":o._preload,i._node.volume=h*t.volume(),i._node.load()),i},reset:function(){var i=this,o=i._parent;return i._muted=o._muted,i._loop=o._loop,i._volume=o._volume,i._rate=o._rate,i._seek=0,i._rateSeek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,i},_errorListener:function(){var i=this;i._parent._emit("loaderror",i._id,i._node.error?i._node.error.code:0),i._node.removeEventListener("error",i._errorFn,!1)},_loadListener:function(){var i=this,o=i._parent;o._duration=Math.ceil(i._node.duration*10)/10,Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue()),i._node.removeEventListener(t._canPlayEvent,i._loadFn,!1)},_endListener:function(){var i=this,o=i._parent;o._duration===Infinity&&(o._duration=Math.ceil(i._node.duration*10)/10,o._sprite.__default[1]===Infinity&&(o._sprite.__default[1]=o._duration*1e3),o._ended(i)),i._node.removeEventListener("ended",i._endFn,!1)}};var a={},s=function(i){var o=i._src;if(a[o]){i._duration=a[o].duration,f(i);return}if(/^data:[^;]+;base64,/.test(o)){for(var h=atob(o.split(",")[1]),d=new Uint8Array(h.length),v=0;v<h.length;++v)d[v]=h.charCodeAt(v);l(d.buffer,i)}else{var _=new XMLHttpRequest;_.open(i._xhr.method,o,!0),_.withCredentials=i._xhr.withCredentials,_.responseType="arraybuffer",i._xhr.headers&&Object.keys(i._xhr.headers).forEach(function(p){_.setRequestHeader(p,i._xhr.headers[p])}),_.onload=function(){var p=(_.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){i._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}l(_.response,i)},_.onerror=function(){i._webAudio&&(i._html5=!0,i._webAudio=!1,i._sounds=[],delete a[o],i.load())},c(_)}},c=function(i){try{i.send()}catch(o){i.onerror()}},l=function(i,o){var h=function(){o._emit("loaderror",null,"Decoding audio data failed.")},d=function(v){v&&o._sounds.length>0?(a[o._src]=v,f(o,v)):h()};typeof Promise!="undefined"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(i).then(d).catch(h):t.ctx.decodeAudioData(i,d,h)},f=function(i,o){o&&!i._duration&&(i._duration=o.duration),Object.keys(i._sprite).length===0&&(i._sprite={__default:[0,i._duration*1e3]}),i._state!=="loaded"&&(i._state="loaded",i._emit("load"),i._loadQueue())},u=function(){if(!!t.usingWebAudio){try{typeof AudioContext!="undefined"?t.ctx=new AudioContext:typeof webkitAudioContext!="undefined"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch(v){t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var i=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),o=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),h=o?parseInt(o[1],10):null;if(i&&h&&h<9){var d=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!d&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain=="undefined"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:r}}),typeof Te!="undefined"&&(Te.Howler=t,Te.Howl=r),typeof global!="undefined"?(global.HowlerGlobal=e,global.Howler=t,global.Howl=r,global.Sound=n):typeof window!="undefined"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=r,window.Sound=n)})();(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var n=r._howls.length-1;n>=0;n--)r._howls[n].stereo(t);return r},HowlerGlobal.prototype.pos=function(t,r,n){var a=this;if(!a.ctx||!a.ctx.listener)return a;if(r=typeof r!="number"?a._pos[1]:r,n=typeof n!="number"?a._pos[2]:n,typeof t=="number")a._pos=[t,r,n],typeof a.ctx.listener.positionX!="undefined"?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);else return a._pos;return a},HowlerGlobal.prototype.orientation=function(t,r,n,a,s,c){var l=this;if(!l.ctx||!l.ctx.listener)return l;var f=l._orientation;if(r=typeof r!="number"?f[1]:r,n=typeof n!="number"?f[2]:n,a=typeof a!="number"?f[3]:a,s=typeof s!="number"?f[4]:s,c=typeof c!="number"?f[5]:c,typeof t=="number")l._orientation=[t,r,n,a,s,c],typeof l.ctx.listener.forwardX!="undefined"?(l.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(t,r,n,a,s,c);else return f;return l},Howl.prototype.init=function(t){return function(r){var n=this;return n._orientation=r.orientation||[1,0,0],n._stereo=r.stereo||null,n._pos=r.pos||null,n._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle!="undefined"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle!="undefined"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain!="undefined"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel!="undefined"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance!="undefined"?r.maxDistance:1e4,panningModel:typeof r.panningModel!="undefined"?r.panningModel:"HRTF",refDistance:typeof r.refDistance!="undefined"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor!="undefined"?r.rolloffFactor:1},n._onstereo=r.onstereo?[{fn:r.onstereo}]:[],n._onpos=r.onpos?[{fn:r.onpos}]:[],n._onorientation=r.onorientation?[{fn:r.onorientation}]:[],t.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,r){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(t,r)}}),n;var a=typeof Howler.ctx.createStereoPanner=="undefined"?"spatial":"stereo";if(typeof r=="undefined")if(typeof t=="number")n._stereo=t,n._pos=[t,0,0];else return n._stereo;for(var s=n._getSoundIds(r),c=0;c<s.length;c++){var l=n._soundById(s[c]);if(l)if(typeof t=="number")l._stereo=t,l._pos=[t,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,a),a==="spatial"?typeof l._panner.positionX!="undefined"?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(t,0,0):l._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",l._id);else return l._stereo}return n},Howl.prototype.pos=function(t,r,n,a){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"pos",action:function(){s.pos(t,r,n,a)}}),s;if(r=typeof r!="number"?0:r,n=typeof n!="number"?-.5:n,typeof a=="undefined")if(typeof t=="number")s._pos=[t,r,n];else return s._pos;for(var c=s._getSoundIds(a),l=0;l<c.length;l++){var f=s._soundById(c[l]);if(f)if(typeof t=="number")f._pos=[t,r,n],f._node&&((!f._panner||f._panner.pan)&&e(f,"spatial"),typeof f._panner.positionX!="undefined"?(f._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):f._panner.setPosition(t,r,n)),s._emit("pos",f._id);else return f._pos}return s},Howl.prototype.orientation=function(t,r,n,a){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"orientation",action:function(){s.orientation(t,r,n,a)}}),s;if(r=typeof r!="number"?s._orientation[1]:r,n=typeof n!="number"?s._orientation[2]:n,typeof a=="undefined")if(typeof t=="number")s._orientation=[t,r,n];else return s._orientation;for(var c=s._getSoundIds(a),l=0;l<c.length;l++){var f=s._soundById(c[l]);if(f)if(typeof t=="number")f._orientation=[t,r,n],f._node&&(f._panner||(f._pos||(f._pos=s._pos||[0,0,-.5]),e(f,"spatial")),typeof f._panner.orientationX!="undefined"?(f._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):f._panner.setOrientation(t,r,n)),s._emit("orientation",f._id);else return f._orientation}return s},Howl.prototype.pannerAttr=function(){var t=this,r=arguments,n,a,s;if(!t._webAudio)return t;if(r.length===0)return t._pannerAttr;if(r.length===1)if(typeof r[0]=="object")n=r[0],typeof a=="undefined"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),t._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle!="undefined"?n.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle!="undefined"?n.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain!="undefined"?n.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel!="undefined"?n.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance!="undefined"?n.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof n.pannerAttr.refDistance!="undefined"?n.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor!="undefined"?n.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel!="undefined"?n.pannerAttr.panningModel:t._panningModel});else return s=t._soundById(parseInt(r[0],10)),s?s._pannerAttr:t._pannerAttr;else r.length===2&&(n=r[0],a=parseInt(r[1],10));for(var c=t._getSoundIds(a),l=0;l<c.length;l++)if(s=t._soundById(c[l]),s){var f=s._pannerAttr;f={coneInnerAngle:typeof n.coneInnerAngle!="undefined"?n.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle!="undefined"?n.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain!="undefined"?n.coneOuterGain:f.coneOuterGain,distanceModel:typeof n.distanceModel!="undefined"?n.distanceModel:f.distanceModel,maxDistance:typeof n.maxDistance!="undefined"?n.maxDistance:f.maxDistance,refDistance:typeof n.refDistance!="undefined"?n.refDistance:f.refDistance,rolloffFactor:typeof n.rolloffFactor!="undefined"?n.rolloffFactor:f.rolloffFactor,panningModel:typeof n.panningModel!="undefined"?n.panningModel:f.panningModel};var u=s._panner;u?(u.coneInnerAngle=f.coneInnerAngle,u.coneOuterAngle=f.coneOuterAngle,u.coneOuterGain=f.coneOuterGain,u.distanceModel=f.distanceModel,u.maxDistance=f.maxDistance,u.refDistance=f.refDistance,u.rolloffFactor=f.rolloffFactor,u.panningModel=f.panningModel):(s._pos||(s._pos=t._pos||[0,0,-.5]),e(s,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var r=this,n=r._parent;r._orientation=n._orientation,r._stereo=n._stereo,r._pos=n._pos,r._pannerAttr=n._pannerAttr,t.call(this),r._stereo?n.stereo(r._stereo):r._pos&&n.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var r=this,n=r._parent;return r._orientation=n._orientation,r._stereo=n._stereo,r._pos=n._pos,r._pannerAttr=n._pannerAttr,r._stereo?n.stereo(r._stereo):r._pos?n.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,n._refreshBuffer(r)),t.call(this)}}(Sound.prototype.reset);var e=function(t,r){r=r||"spatial",r==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX!="undefined"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX!="undefined"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()});var gc={};var Qc,cr=J(()=>{Qc=K(De());WL.registerComponent("howler-audio-listener",{spatial:{type:WL.Type.Bool,default:!0}},{init:function(){this.origin=[0,0,0],this.fwd=[0,0,0],this.up=[0,0,0]},update:function(){this.spatial&&(this.object.getTranslationWorld(this.origin),this.object.getForward(this.fwd),this.object.getUp(this.up),Howler.pos(this.origin[0],this.origin[1],this.origin[2]),Howler.orientation(this.fwd[0],this.fwd[1],this.fwd[2],this.up[0],this.up[1],this.up[2]))}})});var Mc={};var lr,fr=J(()=>{lr=K(De());WL.registerComponent("howler-audio-source",{volume:{type:WL.Type.Float,default:1},spatial:{type:WL.Type.Bool,default:!0},loop:{type:WL.Type.Bool,default:!1},autoplay:{type:WL.Type.Bool,default:!1},src:{type:WL.Type.String,default:""}},{start:function(){this.audio=new lr.Howl({src:[this.src],loop:this.loop,volume:this.volume,autoplay:this.autoplay}),this.lastPlayedAudioId=null,this.origin=[0,0,0],this.spatial&&this.autoplay&&(this.object.getTranslationWorld(this.origin),this.audio.pos(this.origin[0],this.origin[1],this.origin[2]),this.play())},update:function(){!this.spatial||!this.lastPlayedAudioId||(this.object.getTranslationWorld(this.origin),this.audio.pos(this.origin[0],this.origin[1],this.origin[2],this.lastPlayedAudioId))},play:function(){this.lastPlayedAudioId&&this.audio.stop(this.lastPlayedAudioId),this.lastPlayedAudioId=this.audio.play(),this.spatial&&(this.object.getTranslationWorld(this.origin),this.audio.pos(this.origin[0],this.origin[1],this.origin[2],this.lastPlayedAudioId))},stop:function(){this.lastPlayedAudioId&&(this.audio.stop(this.lastPlayedAudioId),this.lastPlayedAudioId=null)}})});var hr=H(()=>{WL.registerComponent("image-texture",{url:{type:WL.Type.String,default:""},meshIndex:{type:WL.Type.Int,default:0}},{init:function(){let e=this.object;WL.textures.load(this.url,"anonymous").then(function(t){let r=e.getComponent("mesh",this.meshIndex).material;r.shader=="Flat Opaque Textured"?r.flatTexture=t:r.shader=="Phong Opaque Textured"?r.diffuseTexture=t:console.error("Shader",r.shader,"not supported by image-texture")}).catch(console.err)}})});var xc={};var dr,ur=J(()=>{dr=K(ne());WL.registerComponent("mouse-look",{sensitity:{type:WL.Type.Float,default:.25},requireMouseDown:{type:WL.Type.Bool,default:!0},mouseButtonIndex:{type:WL.Type.Int,default:0}},{init:function(){this.currentRotationY=0,this.currentRotationX=0,this.origin=new Float32Array(3),this.parentOrigin=new Float32Array(3),document.addEventListener("mousemove",function(e){(this.mouseDown||!this.requireMouseDown)&&(this.rotationY=-this.sensitity*e.movementX/100,this.rotationX=-this.sensitity*e.movementY/100,this.currentRotationX+=this.rotationX,this.currentRotationY+=this.rotationY,this.currentRotationX=Math.min(1.507,this.currentRotationX),this.currentRotationX=Math.max(-1.507,this.currentRotationX),this.object.getTranslationWorld(this.origin),this.object.parent.getTranslationWorld(this.parentOrigin),dr.vec3.sub(this.origin,this.origin,this.parentOrigin),this.object.resetTranslationRotation(),this.object.rotateAxisAngleRad([1,0,0],this.currentRotationX),this.object.rotateAxisAngleRad([0,1,0],this.currentRotationY),this.object.translate(this.origin))}.bind(this)),this.requireMouseDown&&(this.mouseButtonIndex==2&&WL.canvas.addEventListener("contextmenu",function(e){e.preventDefault()},!1),WL.canvas.addEventListener("mousedown",function(e){if(e.button==this.mouseButtonIndex&&(this.mouseDown=!0,document.body.style.cursor="grabbing",e.button==1))return e.preventDefault(),!1}.bind(this)),WL.canvas.addEventListener("mouseup",function(e){e.button==this.mouseButtonIndex&&(this.mouseDown=!1,document.body.style.cursor="initial")}.bind(this)))},start:function(){this.rotationX=0,this.rotationY=0}})});var bc={};var ie,pr=J(()=>{ie=K(ne());WL.registerComponent("teleport",{teleportIndicatorMeshObject:{type:WL.Type.Object},camRoot:{type:WL.Type.Object},cam:{type:WL.Type.Object},eyeLeft:{type:WL.Type.Object},eyeRight:{type:WL.Type.Object},handedness:{type:WL.Type.Enum,values:["input component","left","right","none"],default:"input component"},floorGroup:{type:WL.Type.Int,default:1},thumbstickActivationThreshhold:{type:WL.Type.Float,default:-.7},thumbstickDeactivationThreshhold:{type:WL.Type.Float,default:.3},indicatorYOffset:{type:WL.Type.Float,default:.01},rayCastMode:{type:WL.Type.Enum,values:["collision","physx"],default:"collision"},maxDistance:{type:WL.Type.Float,default:100}},{init:function(){if(this._prevThumbstickAxis=new Float32Array(2),this._tempVec=new Float32Array(3),this._tempVec0=new Float32Array(3),this._currentIndicatorRotation=0,this.input=this.object.getComponent("input"),!this.input){console.error(this.object.name,"generic-teleport-component.js: input component is required on the object");return}if(!this.teleportIndicatorMeshObject){console.error(this.object.name,"generic-teleport-component.js: Teleport indicator mesh is missing");return}if(!this.camRoot){console.error(this.object.name,"generic-teleport-component.js: camRoot not set");return}this.isIndicating=!1,this.cam&&(this.isMouseIndicating=!1,WL.canvas.addEventListener("mousedown",this.onMouseDown.bind(this)),WL.canvas.addEventListener("mouseup",this.onMouseUp.bind(this))),this.indicatorHidden=!0,this.hitSpot=new Float32Array(3),this._hasHit=!1,this._extraRotation=0,this._currentStickAxes=new Float32Array(2)},start:function(){if(this.handedness==0){let e=this.object.getComponent("input");e?(this.handedness=e.handedness,this.input=e):console.warn("teleport component on object",this.object.name,'was configured with handedness "input component", but object has no input component.')}else this.handedness=["left","right"][this.handedness-1];WL.onXRSessionStart.push(this.setupVREvents.bind(this)),this.teleportIndicatorMeshObject.active=!1},_getCamRotation:function(){return this.eyeLeft.getForward(this._tempVec),this._tempVec[1]=0,ie.vec3.normalize(this._tempVec,this._tempVec),Math.atan2(this._tempVec[0],this._tempVec[2])},update:function(){let e=0;if(this.gamepad&&this.gamepad.axes&&(this._currentStickAxes[0]=this.gamepad.axes[2],this._currentStickAxes[1]=this.gamepad.axes[3],e=Math.abs(this._currentStickAxes[0])+Math.abs(this._currentStickAxes[1])),!this.isIndicating&&this._prevThumbstickAxis[1]>=this.thumbstickActivationThreshhold&&this._currentStickAxes[1]<this.thumbstickActivationThreshhold?this.isIndicating=!0:this.isIndicating&&e<this.thumbstickDeactivationThreshhold&&(this.isIndicating=!1,this.teleportIndicatorMeshObject.active=!1,this._hasHit&&this._teleportPlayer(this.hitSpot,this._extraRotation)),this.isIndicating&&this.teleportIndicatorMeshObject&&this.input){let t=this._tempVec0;ie.quat2.getTranslation(t,this.object.transformWorld);let r=this.object.getForward(this._tempVec),n=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(t,r,1<<this.floorGroup):WL.physics.rayCast(t,r,1<<this.floorGroup,this.maxDistance);n.hitCount>0?(this.indicatorHidden=!1,this._extraRotation=Math.PI+Math.atan2(this._currentStickAxes[0],this._currentStickAxes[1]),this._currentIndicatorRotation=this._getCamRotation()+(this._extraRotation-Math.PI),this.teleportIndicatorMeshObject.resetTranslationRotation(),this.teleportIndicatorMeshObject.rotateAxisAngleRad([0,1,0],this._currentIndicatorRotation),this.teleportIndicatorMeshObject.translate(n.locations[0]),this.teleportIndicatorMeshObject.translate([0,this.indicatorYOffset,0]),this.teleportIndicatorMeshObject.active=!0,this.hitSpot.set(n.locations[0]),this._hasHit=!0):(this.indicatorHidden||(this.teleportIndicatorMeshObject.active=!1,this.indicatorHidden=!0),this._hasHit=!1)}else this.teleportIndicatorMeshObject&&this.isMouseIndicating&&this.onMousePressed();this._prevThumbstickAxis.set(this._currentStickAxes)},setupVREvents:function(e){if(this.session=e,e.addEventListener("end",function(){this.gamepad=null,this.session=null}.bind(this)),e.inputSources&&e.inputSources.length)for(let t=0;t<e.inputSources.length;t++){let r=e.inputSources[t];r.handedness==this.handedness&&(this.gamepad=r.gamepad)}e.addEventListener("inputsourceschange",function(t){if(t.added&&t.added.length)for(let r=0;r<t.added.length;r++){let n=t.added[r];n.handedness==this.handedness&&(this.gamepad=n.gamepad)}}.bind(this))},onMouseDown:function(){this.isMouseIndicating=!0},onMouseUp:function(){this.isMouseIndicating=!1,this.teleportIndicatorMeshObject.active=!1,this._hasHit&&this._teleportPlayer(this.hitSpot,0)},onMousePressed:function(){let e=[0,0,0];ie.quat2.getTranslation(e,this.cam.transformWorld);let t=this.cam.getForward(this._tempVec),r=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(e,t,1<<this.floorGroup):WL.physics.rayCast(e,t,1<<this.floorGroup,this.maxDistance);r.hitCount>0?(this.indicatorHidden=!1,t[1]=0,ie.vec3.normalize(t,t),this._currentIndicatorRotation=-Math.sign(t[2])*Math.acos(t[0])-Math.PI*.5,this.teleportIndicatorMeshObject.resetTranslationRotation(),this.teleportIndicatorMeshObject.rotateAxisAngleRad([0,1,0],this._currentIndicatorRotation),this.teleportIndicatorMeshObject.translate(r.locations[0]),this.teleportIndicatorMeshObject.active=!0,this.hitSpot=r.locations[0],this._hasHit=!0):(this.indicatorHidden||(this.teleportIndicatorMeshObject.active=!1,this.indicatorHidden=!0),this._hasHit=!1)},_teleportPlayer:function(e,t){this.camRoot.rotateAxisAngleRad([0,1,0],t);let r=this._tempVec,n=this._tempVec0;this.session?(this.eyeLeft.getTranslationWorld(r),this.eyeRight.getTranslationWorld(n),ie.vec3.add(r,r,n),ie.vec3.scale(r,r,.5)):this.cam.getTranslationWorld(r),this.camRoot.getTranslationWorld(n),ie.vec3.sub(r,n,r),r[0]+=e[0],r[1]=e[1],r[2]+=e[2],this.camRoot.setTranslationWorld(r)}});WL.registerComponent("player-height",{height:{type:WL.Type.Float,default:1.75}},{init:function(){WL.onXRSessionStart.push(this.onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this.onXRSessionEnd.bind(this))},start:function(){this.object.resetTranslationRotation(),this.object.translate([0,this.height,0])},onXRSessionStart:function(){["local","viewer"].includes(WebXR.refSpace)||this.object.resetTranslationRotation()},onXRSessionEnd:function(){["local","viewer"].includes(WebXR.refSpace)||(this.object.resetTranslationRotation(),this.object.translate([0,this.height,0]))}})});var vr=H(()=>{WL.registerComponent("video-texture",{url:{type:WL.Type.String,default:""},material:{type:WL.Type.Material},loop:{type:WL.Type.Bool,default:!0},autoplay:{type:WL.Type.Bool,default:!0},muted:{type:WL.Type.Bool,default:!0}},{init:function(){if(!this.material){console.error("video-texture: material property not set");return}this.loaded=!1,this.frameUpdateRequested=!0,this.video=document.createElement("video"),this.video.src=this.url,this.video.autoplay=this.autoplay,this.video.loop=this.loop,this.video.muted=this.muted,this.video.addEventListener("playing",function(){this.loaded=!0}.bind(this)),this.video.play()},applyTexture:function(){let e=this.material;this.texture=new WL.Texture(this.video),e.shader=="Flat Opaque Textured"?e.flatTexture=this.texture:e.shader=="Phong Opaque Textured"?e.diffuseTexture=this.texture:console.error("Shader",e.shader,"not supported by video-texture"),"requestVideoFrameCallback"in this.video?this.video.requestVideoFrameCallback(this.updateVideo.bind(this)):this.video.addEventListener("timeupdate",function(){this.frameUpdateRequested=!0}.bind(this))},update:function(e){this.loaded&&this.frameUpdateRequested&&(this.texture?this.texture.update():this.applyTexture(),this.frameUpdateRequested=!1)},updateVideo:function(){this.frameUpdateRequested=!0,this.video.requestVideoFrameCallback(this.updateVideo.bind(this))}})});var _r=H(()=>{WL.registerComponent("vr-mode-active-switch",{activateComponents:{type:WL.Type.Enum,values:["in VR","in non-VR"],default:"in VR"},affectChildren:{type:WL.Type.Bool,default:!0}},{start:function(){this.components=[],this.getComponents(this.object),this.onXRSessionEnd(),WL.onXRSessionStart.push(this.onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this.onXRSessionEnd.bind(this))},getComponents:function(e){let t=e.getComponents().filter(r=>r.type!="vr-mode-active-switch");if(this.components=this.components.concat(t),this.affectChildren){let r=e.children;for(let n=0;n<r.length;++n)this.getComponents(r[n])}},setComponentsActive:function(e){let t=this.components;for(let r=0;r<t.length;++r)t[r].active=e},onXRSessionStart:function(){!this.active||this.setComponentsActive(this.activateComponents==0)},onXRSessionEnd:function(){!this.active||this.setComponentsActive(this.activateComponents!=0)}})});var Ac={};var ke,mr=J(()=>{ke=K(ne());WL.registerComponent("wasd-controls",{speed:{type:WL.Type.Float,default:.1},headObject:{type:WL.Type.Object}},{init:function(){this.up=!1,this.right=!1,this.down=!1,this.left=!1,window.addEventListener("keydown",this.press.bind(this)),window.addEventListener("keyup",this.release.bind(this))},start:function(){this.headObject=this.headObject||this.object},update:function(){let e=[0,0,0];this.up&&(e[2]-=1),this.down&&(e[2]+=1),this.left&&(e[0]-=1),this.right&&(e[0]+=1),ke.vec3.normalize(e,e),e[0]*=this.speed,e[2]*=this.speed,ke.vec3.transformQuat(e,e,this.headObject.transformWorld),this.object.translate(e)},press:function(e){e.keyCode===38||e.keyCode===87||e.keyCode===90?this.up=!0:e.keyCode===39||e.keyCode===68?this.right=!0:e.keyCode===40||e.keyCode===83?this.down=!0:(e.keyCode===37||e.keyCode===65||e.keyCode===81)&&(this.left=!0)},release:function(e){e.keyCode===38||e.keyCode===87||e.keyCode===90?this.up=!1:e.keyCode===39||e.keyCode===68?this.right=!1:e.keyCode===40||e.keyCode===83?this.down=!1:(e.keyCode===37||e.keyCode===65||e.keyCode===81)&&(this.left=!1)}})});var wc={};var Se,yr=J(()=>{Se=K(ne());WL.registerComponent("wonderleap-ad",{auId:{type:WL.Type.String,default:"ce6f68fc-4809-4409-8f57-c631283ce5a3"},adId:{type:WL.Type.String}},{init:function(){this.mesh=this.object.getComponent("mesh",0),this.collision=this.object.addComponent("collision"),this.collision.collider=WL.Collider.Box,this.collision.group=2,this.cursorTarget=this.object.addComponent("cursor-target"),this.timeSinceLastVizCheck=0,this.visibleDuration=0,this.durationThreshold=10},start:function(){Wonderleap.fetchAd(this.auId).then(function(e){this.ad=e,WL.textures.load(e.asset,"").then(function(t){let r=WL._images[t._imageIndex];this.collision.extents=[r.width/r.height,1,.1],this.object.scale([r.width/r.height,1,1]),this.mesh.material.shader=="Phong Textured"?this.mesh.material.diffuseTexture=t:this.mesh.material.flatTexture=t}.bind(this)).catch(console.err)}.bind(this)),this.cursorTarget.addClickFunction(this.click.bind(this))},update:function(e){if(this.timeSinceLastVizCheck+=e,this.timeSinceLastVizCheck>.5){let t=this.isVisible();t&&(this.visibleDuration+=this.timeSinceLastVizCheck),this.timeSinceLastVizCheck=0,(!t&&this.visibleDuration>0||this.visibleDuration>this.durationThreshold)&&(Wonderleap.sendMetric("gaze",this.visibleDuration,this.ad.adId,this.ad.auId),this.visibleDuration=0)}},isVisible:function(){let e=WL.scene.activeViews[0];if(!e||!e.active)return console.warn("wonderleap-ad: camera object does not have an active view"),!1;let t=e.object.transformWorld,r=[0,0,0];Se.quat2.getTranslation(r,t);let n=[0,0,-1];Se.vec3.transformQuat(n,n,t);let a=WL.scene.rayCast(r,n,2);for(let s=0;s<a.hitCount;++s)if(a.objects[s].objectId==this.object.objectId)return!0;return!1},click:function(){let e=Module.webxr_session;if(e){e.end().then(this.click.bind(this));return}Wonderleap.sendMetric("click",0,this.ad.adId,this.ad.auId),this.ad.url&&window.open(this.ad.url,"_blank")}})});window.glMatrix=ne();Kt();er();tr();rr();nr();ir();ar();or();cr();fr();hr();ur();pr();vr();_r();mr();yr();})();
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
/*!
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
//# sourceMappingURL=editor-components-bundle.js.map

WL.registerComponent('button', {
    buttonMeshObject: {type: WL.Type.Object},
    hoverMaterial: {type: WL.Type.Material},
}, {
    start: function() {
        this.mesh = this.buttonMeshObject.getComponent('mesh');
        this.defaultMaterial = this.mesh.material;

        this.target = this.object.getComponent('cursor-target');
        this.target.addHoverFunction(this.onHover.bind(this));
        this.target.addUnHoverFunction(this.onUnHover.bind(this));
        this.target.addClickFunction(this.onClick.bind(this));

        this.soundClick = this.object.addComponent('howler-audio-source', {src: 'sfx/click.wav', spatial: true});
        this.soundUnClick = this.object.addComponent('howler-audio-source', {src: 'sfx/unclick.wav', spatial: true});
    },

    onHover: function(_, cursor) {
        this.mesh.material = this.hoverMaterial;
        if(cursor.type == 'finger-cursor') {
            this.buttonMeshObject.translate([0.0, -0.1, 0.0]);
        }
    },

    onClick: function(_, cursor) {
     
        if(cursor.type != 'finger-cursor') {
            this.buttonMeshObject.translate([0.0, -0.1, 0.0]);
            setTimeout(() => this.buttonMeshObject.translate([0.0, 0.1, 0.0]), 100);
        }
        
    },

    onUnHover: function(_, cursor) {
        this.mesh.material = this.defaultMaterial;
        if(cursor.type == 'finger-cursor') {
            this.buttonMeshObject.translate([0.0, 0.1, 0.0]);
        }
    },
});

WL.registerComponent('gun', {
    p: {type: WL.Type.Int}
}, {
    init: function () {

    },
    start: function () {
        this.soundGun = this.object.addComponent('howler-audio-source', { src: 'licensed/gun.wav', spatial: true });

        this.input = this.object.getComponent('input');
        this.initialized = false;
        WL.onXRSessionStart.push((session) => {
            if (this.initialized) return;
            session.addEventListener('select', (e) => {
                if (e.inputSource.handedness === this.input.handedness) {
                    this.pulse(e.inputSource.gamepad);
                    this.soundGun.play();
                }
            });
            this.initialized = true;
        })

    },
    pulse: function (gamepad) {
        var actuator;
        if (!gamepad || !gamepad.hapticActuators) { return; }        
        actuator = gamepad.hapticActuators[0];
        if(!actuator) return;
        actuator.pulse(1, 100);        
      },
    update: function (dt) {
    },
});
WL.registerComponent('shoot', {

}, {
    init: function() {
        
    },
    
    start: function() {
        this.input = this.object.getComponent('input');
        this.initialized = false;
        WL.onXRSessionStart.push((session) => {
            if (this.initialized) return;
            session.addEventListener('select', (e) => {
                if (e.inputSource.handedness === this.input.handedness) {
                    let origin = this.object.getTranslationWorld([])
                    let forwardDirection = [0, 0, 0];
                    this.object.getForward(forwardDirection)

                    let rayHit = WL.scene.rayCast(origin,
                        forwardDirection, (1<<2) ) ;

                    if (rayHit.hitCount > 0) {
                        const target = rayHit.objects[0].getComponent('zombie-target');
                        if(target){
                            target.kill();
                        }                        
                    }
                }
            })
            this.initialized = true;
        })
    },
    update: function(dt) {

    },
});


WL.registerComponent('zombie-controller', {
    zombieMesh: { type: WL.Type.Object },
    zombieAnimation: { type: WL.Type.Object },
    walkAnimParam: { type: WL.Type.Animation },
    biteAnimParam: { type: WL.Type.Animation },
    speed: { type: WL.Type.Float, default: 500.0 },
    player: { type: WL.Type.Object }
}, {
    start: function () {
        this.mesh = this.zombieMesh.getComponent('mesh');
        this.anim = this.zombieAnimation.getComponent('animation');
        this.anim.animation = this.walkAnimParam.retarget(this.mesh.skin);
        this.anim.play();
        this.biting = false;
    },
    update: function (dt) {
        let zombiePos = [];
        this.zombieMesh.getTranslationWorld(zombiePos);

        //this.zombieMesh.getForward(temp);
        let playerPos = []
        this.player.getTranslationWorld(playerPos);
        let newVec = [];
        if (glMatrix.vec3.dist(playerPos, zombiePos) < 2) {
            if (!this.biting) {
                this.anim.animation = this.biteAnimParam.retarget(this.mesh.skin);
                this.anim.play();
                this.biting = true;
            }
        } else {
            if(this.biting){
                this.anim.animation = this.walkAnimParam.retarget(this.mesh.skin);
                this.anim.play();
                this.biting = false;
            }
            glMatrix.vec3.sub(newVec, playerPos, zombiePos);
            glMatrix.vec3.normalize(newVec, newVec);

            glMatrix.vec3.scale(newVec, newVec, this.speed / 1000 * dt);

            //TODO: Fix Rotating towards player
            //this.zombieMesh.lookAt(playerPos, [0,1,0]);
            this.zombieMesh.translate(newVec);

        }

    }
});
WL.registerComponent('zombie-particles', {
    /* Mesh for spawned particles */
    mesh: { type: WL.Type.Mesh, default: null },
    /* Material for spawned particles */
    material: { type: WL.Type.Material, default: null },
    /* Delay between particle spawns. If below time of a frame, will spawn multiple particles in update. */
    delay: { type: WL.Type.Float, default: 0.1 },
    /* Maximum number of particles, once limit is reached, particles are recycled first-in-first-out. */
    maxParticles: { type: WL.Type.Int, default: 64 },
    /* Initial speed of emitted particles. */
    initialSpeed: { type: WL.Type.Float, default: 30 },
    /* Size of a particle */
    particleScale: { type: WL.Type.Float, default: 0.1 },
}, {
    init: function () {
        this.time = 0.0;
        this.count = 0;
        this.zombieDying = false;
    },
    start: function () {
        this.objects = [];
        this.velocities = [];

        this.objects = WL.scene.addObjects(this.maxParticles, null, this.maxParticles);

        for (let i = 0; i < this.maxParticles; ++i) {
            this.velocities.push([0, 0, 0]);
            let obj = this.objects[i];
            obj.name = "particle" + this.count.toString();
            let mesh = obj.addComponent('mesh');

            

            mesh.mesh = this.mesh;
            mesh.material = this.material;
            /* Most efficient way to hide the mesh */
            obj.scale([0, 0, 0]);
        }
    },
    die: function () {
        const origin = [0, 0, 0];
        this.object.getTranslationWorld(origin);
        origin[1] = 0;
        
        for (let index = 0; index < this.objects.length; ++index) {
            let obj = this.objects[index];
            obj.resetTransform();
            obj.scale([this.particleScale, this.particleScale, this.particleScale]);    
            obj.getComponent('mesh').active = true;
            let pos = [];
            glMatrix.vec3.add(pos, origin,
                [Math.random() - 0.5 * .2,
                 Math.random() * 1.7,
                 Math.random() - 0.5 * .2])
            obj.setTranslationWorld(pos);

            this.velocities[index][0] = Math.random() - 0.5;
            this.velocities[index][1] = Math.random() - 0.5;
            this.velocities[index][2] = Math.random() - 0.5;
            
            glMatrix.vec3.normalize(this.velocities[index], this.velocities[index]);
            glMatrix.vec3.scale(this.velocities[index], this.velocities[index], Math.random()*this.initialSpeed);
        }
        this.zombieDying = true;
    },
    update: function (dt) {
        if (!this.zombieDying) {
            return;
        }
        this.time += dt;
        // if (this.time > this.delay) {
        //     /* Time to spawn particles */
        //     const spawnCount = Math.floor(this.time / this.delay)
        //     for (let i = 0; i < spawnCount; ++i) this.spawn();
        //     this.time -= this.delay * spawnCount;
        // }

        // this.object.translate([dt * 4, 0, 0]);
        // this.object.rotateAxisAngleDeg([0, 1, 0], dt * 90);

        /* Target for retrieving particles world locations */
        let origin = [0, 0, 0];
        let distance = [0, 0, 0];
        for (let i = 0; i <  this.objects.length; ++i) {
            /* Get translation first, as object.translate() will mark
             * the object as dirty, which will cause it to recalculate
             * obj.transformWorld on access. We want to avoid this and
             * have it be recalculated in batch at the end of frame
             * instead */
            glMatrix.quat2.getTranslation(origin, this.objects[i].transformWorld);

            /* Apply gravity */
            const vel = this.velocities[i];
            vel[1] -= /*9.81*/ 4.9 * dt;

            /* Check if particle would collide */
            // if((origin[1] + vel[1]*dt) <= this.particleScale && vel[1] <= 0) {
            //     /* Pseudo friction */
            //     const frict = 1/(1 - vel[1]);
            //     vel[0] = frict*vel[0];
            //     vel[2] = frict*vel[2];

            //     /* Reflect */
            //     vel[1] = -0.6*vel[1];
            //     if(vel[1] < 0.6) vel[1] = 0;
            // }
        }

        for (let i = 0; i < this.objects.length; ++i) {
            /* Apply velocity */
            glMatrix.vec3.scale(distance, this.velocities[i], dt);
            this.objects[i].translate(distance);
        }
    },
    /** Spawn a particle */
    spawn: function () {
        let index = this.count % this.maxParticles;

        let obj = this.objects[index];
        obj.resetTransform();
        obj.scale([this.particleScale, this.particleScale, this.particleScale]);

        /* Activate component, otherwise it will not show up! */
        obj.getComponent('mesh').active = true;


        this.count += 1;
    }
});
WL.registerComponent('zombie-target', {
    zombieController: {type: WL.Type.Object},
    zombieParticles: {type: WL.Type.Object}
}, {
    kill:function(){
        let thispos = [];
        this.object.getTranslationWorld(thispos);
        this.zombieParticles.setTranslationWorld(thispos);
        this.zombieParticles.getComponent('zombie-particles').die();
        this.zombieController.setTranslationWorld([0,-1000,0])
    }
});
//# sourceMappingURL=HouseOfTheDead-bundle.js.map